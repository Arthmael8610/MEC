(function(a){a.HSCore.components.HSFileUpload={_baseConfig:{},pageCollection:a(),init:function(b,c){this.collection=b&&a(b).length?a(b):a();if(!a(b).length){return}this.config=c&&a.isPlainObject(c)?a.extend({},this._baseConfig,c):this._baseConfig;this.config.itemSelector=b;this.initFileUpload();return this.pageCollection},initFileUpload:function(){var c=this,b=c.pageCollection;this.collection.each(function(g,e){var l=a(e),m=a('<input id="hsFile" type="file" name="hs-file" style="display: none;">').insertBefore(l),j=a('<input id="hsDataCollection" type="hidden" name="hs-data-collection">').insertBefore(l),k=l.data("element-classes"),h=l.data("icon-classes"),f=l.data("text-classes"),d=l.data("remove-btn-classes"),n=[];l.on("click",function(){a(m).trigger("click")});m.on("change",function(){var p=a(this).val(),i=p.replace(/.+[\\\/]/,""),o=a('<div id="hsFileItem'+g+'" class="js-file-item '+k+'"><i class="'+h+'"></i><span class="'+f+'">'+i+'</span><i class="js-remove-file '+d+'" data-value="'+p+'"></i></div>');n.push({file:p});j.val(JSON.stringify(n));o.insertAfter(a(this))});a("body").on("click",".js-remove-file",function(){var i=a(this).data("value");n=n.filter(function(o){return o.file!==i});a(this).parent().remove();j.val(JSON.stringify(n));if(!n.length){m.val("")}});b=b.add(l)})}}})(jQuery);