(function(a){a.HSCore.components.HSScrollNav={_baseConfig:{duration:400,easing:"linear",over:a(),activeItemClass:"active",afterShow:function(){},beforeShow:function(){}},_pageCollection:a(),init:function(f,e){var d=this;if(!f||!f.length){return a()}f.each(function(h,j){var k=a(j),g=e&&a.isPlainObject(e)?a.extend(true,{},d._baseConfig,e,k.data()):a.extend(true,{},d._baseConfig,k.data());if(!k.data("HSScrollNav")){k.data("HSScrollNav",new b(k,g));d._pageCollection=d._pageCollection.add(k)}});a(window).on("scroll.HSScrollNav",function(){d._pageCollection.each(function(g,h){a(h).data("HSScrollNav").highlight()})}).trigger("scroll.HSScrollNav");return f}};function b(e,d){this.element=e;this.config=d;this._items=a();this._makeItems();this._bindEvents()}b.prototype._makeItems=function(){var d=this;this.element.find('a[href^="#"]').each(function(e,f){var g=a(f);if(!g.data("HSScrollNavSection")){g.data("HSScrollNavSection",new c(g,d.config));d._items=d._items.add(g)}})};b.prototype._bindEvents=function(){var d=this;this.element.on("click.HSScrollNav",'a[href^="#"]',function(g){var f=this;d._lockHightlight=true;if(d.current){d.current.unhighlight()}f.blur();d.current=a(f).data("HSScrollNavSection");d.current.highlight();a(this).data("HSScrollNavSection").show(function(){d._lockHightlight=false});g.preventDefault()})};b.prototype.highlight=function(){var e=this,d,f,h,g;if(!this._items.length||this._lockHightlight){return}g=a(window).scrollTop();if(g+a(window).height()===a(document).height()){this.current=this._items.last().data("HSScrollNavSection");this.unhighlight();this.current.highlight();this.current.changeHash();return}this._items.each(function(j,k){var l=a(k).data("HSScrollNavSection"),m=l.section;if(g>l.offset){h=l}});if(h&&this.current!=h){this.unhighlight();h.highlight();if(this.current){h.changeHash()}this.current=h}};b.prototype.unhighlight=function(){this._items.each(function(d,e){a(e).data("HSScrollNavSection").unhighlight()})};function c(f,e){var d=this;this.element=f;this.config=e;Object.defineProperty(this,"section",{value:a(d.element.attr("href"))});Object.defineProperty(this,"offset",{get:function(){var j=a(".u-header"),h=getComputedStyle(j.get(0)),g=h.position,i=d.section.offset().top;if(j.length&&g=="fixed"&&parseInt(h.top)==0){i=i-j.outerHeight()-parseInt(h.marginTop)}if(d.config.over.length){i=i-d.config.over.outerHeight()}return i}})}c.prototype.show=function(e){var d=this;if(!this.section.length){return}d.config.beforeShow.call(d.section);this.changeHash();a("html, body").stop().animate({scrollTop:d.offset+3},{duration:d.config.duration,easing:d.config.easing,complete:function(){a("html, body").stop().animate({scrollTop:d.offset+3},{duration:d.config.duration,easing:d.config.easing,complete:function(){d.config.afterShow.call(d.section);if(a.isFunction(e)){e()}}})}})};c.prototype.changeHash=function(){this.section.attr("id","");window.location.hash=this.element.attr("href");this.section.attr("id",this.element.attr("href").slice(1))};c.prototype.highlight=function(){var d=this.element.parent("li");if(d.length){d.addClass(this.config.activeItemClass)}};c.prototype.unhighlight=function(){var d=this.element.parent("li");if(d.length){d.removeClass(this.config.activeItemClass)}}})(jQuery);