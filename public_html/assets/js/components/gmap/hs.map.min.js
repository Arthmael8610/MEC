(function(a){a.HSCore.components.HSGMap={_baseConfig:{zoom:14,scrollwheel:false},pageCollection:a(),init:function(b,c){this.collection=b&&a(b).length?a(b):a();if(!a(b).length){return}this.config=c&&a.isPlainObject(c)?a.extend({},this._baseConfig,c):this._baseConfig;this.config.itemSelector=b;this.initGMap();return this.pageCollection},initGMap:function(){var d=this,b=d.config,c=d.pageCollection;this.collection.each(function(O,P){var o=a(P),D=o.attr("id"),F=o.data("type"),L=o.data("lat"),H=o.data("lng"),z=o.data("zoom"),v=o.data("title"),j=JSON.parse(P.getAttribute("data-styles")),u=[],y,w=Boolean(o.data("polygon")),l=JSON.parse(P.getAttribute("data-polygon-cords")),t=JSON.parse(P.getAttribute("data-polygon-styles")),M,C=Boolean(o.data("polylines")),p=JSON.parse(P.getAttribute("data-polylines-cords")),k=JSON.parse(P.getAttribute("data-polylines-styles")),B=Boolean(o.data("routes")),f=JSON.parse(P.getAttribute("data-routes-cords")),R=JSON.parse(P.getAttribute("data-routes-styles")),h=Boolean(o.data("geolocation")),x=Boolean(o.data("geocoding")),S=o.data("cords-target"),K=Boolean(o.data("pin")),E=o.data("pin-icon"),N=Boolean(o.data("multiple-markers")),g=JSON.parse(P.getAttribute("data-markers-locations")),I;if(F=="satellite"){I=new google.maps.Map(document.getElementById(D),{zoom:z?z:b.zoom,scrollwheel:b.scrollwheel});I.setCenter({lat:L,lng:H});I.setMapTypeId(google.maps.MapTypeId.SATELLITE)}else{if(F=="terrain"){I=new google.maps.Map(document.getElementById(D),{zoom:z?z:b.zoom,scrollwheel:b.scrollwheel});I.setCenter({lat:L,lng:H});I.setMapTypeId(google.maps.MapTypeId.TERRAIN)}else{if(F=="street-view"){I=new google.maps.StreetViewPanorama(document.getElementById(D),{zoom:z?z:b.zoom,scrollwheel:b.scrollwheel});I.setPosition({lat:L,lng:H})}else{if(F=="static"){a(document).ready(function(){I=GMaps.staticMapURL({size:[2048,2048],lat:L,lng:H,zoom:z?z:b.zoom});a("#"+D).css("background-image","url("+I+")")})}else{if(F=="custom"){var G=j.length;for(var O=0;O<G;O++){var q=j[O][0],n=j[O][1],r=j[O][2],e=a.extend({},u[O]);if(q!=""){e.featureType=q}if(n!=""){e.elementType=n}e.stylers=r;u.push(e)}I=new GMaps({div:"#"+D,lat:L,lng:H,zoom:z?z:b.zoom,scrollwheel:b.scrollwheel,styles:u});if(K){I.addMarker({lat:L,lng:H,title:v,icon:E})}}else{I=new GMaps({div:"#"+D,lat:L,lng:H,zoom:z?z:b.zoom,scrollwheel:b.scrollwheel});if(K){I.addMarker({lat:L,lng:H,title:v,icon:E})}}}}}}if(K&&F=="satellite"||F=="terrain"||F=="street-view"){var A=new google.maps.Marker({position:{lat:L,lng:H},map:I});if(E){var s=new google.maps.MarkerImage(E);A.setIcon(s)}if(v){A.setOptions({title:v})}}if(N==true){var J=new google.maps.InfoWindow(),Q,m;for(m=0;m<g.length;m++){Q=new google.maps.Marker({position:new google.maps.LatLng(g[m][1],g[m][2]),map:I});google.maps.event.addListener(Q,"click",(function(i,T){return function(){J.setContent(g[T][0]);J.open(I,i)}})(Q,m))}}if(!h){google.maps.event.addDomListener(window,"resize",function(){setTimeout(function(){I.setCenter({lat:L,lng:H})},100)})}if(w){a(document).ready(function(){y=I.drawPolygon({paths:l,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight,fillColor:t.fillColor,fillOpacity:t.fillOpacity})})}if(C){a(document).ready(function(){I.drawPolyline({path:p,strokeColor:k.strokeColor,strokeOpacity:k.strokeOpacity,strokeWeight:k.strokeWeight})})}if(B){a(document).ready(function(){I.drawRoute({origin:f[0],destination:f[1],travelMode:R.travelMode,strokeColor:R.strokeColor,strokeOpacity:R.strokeOpacity,strokeWeight:R.strokeWeight})})}if(h){GMaps.geolocate({success:function(i){I.setCenter({lat:i.coords.latitude,lng:i.coords.longitude});I.addMarker({lat:i.coords.latitude,lng:i.coords.longitude,title:v,icon:E});google.maps.event.addDomListener(window,"resize",function(){setTimeout(function(){I.setCenter({lat:i.coords.latitude,lng:i.coords.longitude})},100)})},error:function(i){alert("Geolocation failed: "+i.message)},not_supported:function(){alert("Your browser does not support geolocation")}})}if(x){a(document).ready(function(){var i=a(S).closest("form");a(i).submit(function(T){T.preventDefault();GMaps.geocode({address:a(S).val().trim(),callback:function(V,U){if(U=="OK"){var W=V[0].geometry.location;I.setCenter(W.lat(),W.lng());I.addMarker({lat:W.lat(),lng:W.lng()});L=W.lat();H=W.lng()}}})})})}c=c.add(o)})}}})(jQuery);