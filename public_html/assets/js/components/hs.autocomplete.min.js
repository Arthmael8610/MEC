(function(a){a.widget("custom.catcomplete",a.ui.autocomplete,{_create:function(){this._super();this.widget().menu("option","items","> :not(.ui-autocomplete-category)")},_renderMenu:function(d,c){var e=this,b="";a.each(c,function(g,h){var f;if(!h.category){f=e._renderItemData(d,h);return}if(h.category!=b){d.append('<li class="ui-autocomplete-category">'+h.category+"</li>");b=h.category}f=e._renderItemData(d,h);if(h.category){f.html(h.label);f.attr("aria-label",h.category+" : "+h.label)}})}});a.HSCore.components.HSAutocomplete={_baseConfig:{minLength:2},pageCollection:a(),init:function(b,c){this.collection=b&&a(b).length?a(b):a();if(!a(b).length){return}this.config=c&&a.isPlainObject(c)?a.extend({},this._baseConfig,c):this._baseConfig;this.config.itemSelector=b;this.initAutocomplete();return this.pageCollection},initAutocomplete:function(){var d=this,b=d.config,c=d.pageCollection;this.collection.each(function(e,f){var h=a(f),g=h.data("url");a.getJSON(g,function(i){h.catcomplete({delay:0,source:i,dataType:"json",minLength:b.minLength,select:function(k,l){var j=a(this);setTimeout(function(){var m=j.val();a(j).val(a(m).get(0).textContent)},1)},focus:function(k,l){var j=a(this);setTimeout(function(){var m=j.val();a(j).val(a(m).get(0).textContent)})}})});c=c.add(h)})}}})(jQuery);