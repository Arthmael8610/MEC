/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */
;!function(d,c){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(a){return d.Bloodhound=c(a)}):"object"==typeof exports?module.exports=c(require("jquery")):d.Bloodhound=c(jQuery)}(this,function(x){var w=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(b){return !b||/^\s*$/.test(b)},escapeRegExChars:function(b){return b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(b){return"string"==typeof b},isNumber:function(b){return"number"==typeof b},isArray:x.isArray,isFunction:x.isFunction,isObject:x.isPlainObject,isUndefined:function(b){return"undefined"==typeof b},isElement:function(b){return !(!b||1!==b.nodeType)},isJQuery:function(a){return a instanceof x},toStr:function(b){return w.isUndefined(b)||null===b?"":b+""},bind:x.proxy,each:function(a,f){function e(d,c){return f(c,d)}x.each(a,e)},map:x.map,filter:x.grep,every:function(a,f){var e=!0;return a?(x.each(a,function(b,c){return(e=f.call(null,c,b,a))?void 0:!1}),!!e):e},some:function(a,f){var e=!1;return a?(x.each(a,function(b,c){return(e=f.call(null,c,b,a))?!1:void 0}),!!e):e},mixin:x.extend,identity:function(b){return b},clone:function(a){return x.extend(!0,{},a)},getIdGenerator:function(){var b=0;return function(){return b++}},templatify:function(a){function d(){return String(a)}return x.isFunction(a)?a:d},defer:function(b){setTimeout(b,0)},debounce:function(g,f,j){var i,h;return function(){var d,c,b=this,a=arguments;return d=function(){i=null,j||(h=g.apply(b,a))},c=j&&!i,clearTimeout(i),i=setTimeout(d,f),c&&(h=g.apply(b,a)),h}},throttle:function(j,i){var B,A,z,y,l,k;return l=0,k=function(){l=new Date,z=null,y=j.apply(B,A)},function(){var b=new Date,a=i-(b-l);return B=this,A=arguments,0>=a?(clearTimeout(z),z=null,l=b,y=j.apply(B,A)):z||(z=setTimeout(k,a)),y}},stringify:function(b){return w.isString(b)?b:JSON.stringify(b)},noop:function(){}}}(),v="0.11.1",u=function(){function b(c){return c=w.toStr(c),c?c.split(/\s+/):[]}function f(c){return c=w.toStr(c),c?c.split(/\W+/):[]}function e(c){return function(a){return a=w.isArray(a)?a:[].slice.call(arguments,0),function(h){var g=[];return w.each(a,function(d){g=g.concat(c(w.toStr(h[d])))}),g}}}return{nonword:f,whitespace:b,obj:{nonword:e(f),whitespace:e(b)}}}(),t=function(){function f(d){this.maxSize=w.isNumber(d)?d:100,this.reset(),this.maxSize<=0&&(this.set=this.get=x.noop)}function b(){this.head=this.tail=null}function a(d,c){this.key=d,this.val=c,this.prev=this.next=null}return w.mixin(f.prototype,{set:function(g,e){var i,h=this.list.tail;this.size>=this.maxSize&&(this.list.remove(h),delete this.hash[h.key],this.size--),(i=this.hash[g])?(i.val=e,this.list.moveToFront(i)):(i=new a(g,e),this.list.add(i),this.hash[g]=i,this.size++)},get:function(d){var c=this.hash[d];return c?(this.list.moveToFront(c),c.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new b}}),w.mixin(b.prototype,{add:function(c){this.head&&(c.next=this.head,this.head.prev=c),this.head=c,this.tail=this.tail||c},remove:function(c){c.prev?c.prev.next=c.next:this.head=c.next,c.next?c.next.prev=c.prev:this.tail=c.prev},moveToFront:function(c){this.remove(c),this.add(c)}}),f}(),s=function(){function z(d,e){this.prefix=["__",d,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+w.escapeRegExChars(this.prefix)),this.ls=e||b,!this.ls&&this._noop()}function y(){return(new Date).getTime()}function l(c){return JSON.stringify(w.isUndefined(c)?null:c)}function k(c){return x.parseJSON(c)}function j(g){var f,A,i=[],h=b.length;for(f=0;h>f;f++){(A=b.key(f)).match(g)&&i.push(A.replace(g,""))}return i}var b;try{b=window.localStorage,b.setItem("~~~","!"),b.removeItem("~~~")}catch(a){b=null}return w.mixin(z.prototype,{_prefix:function(c){return this.prefix+c},_ttlKey:function(c){return this._prefix(c)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=w.noop},_safeSet:function(e,d){try{this.ls.setItem(e,d)}catch(f){"QuotaExceededError"===f.name&&(this.clear(),this._noop())}},get:function(c){return this.isExpired(c)&&this.remove(c),k(this.ls.getItem(this._prefix(c)))},set:function(d,g,e){return w.isNumber(e)?this._safeSet(this._ttlKey(d),l(y()+e)):this.ls.removeItem(this._ttlKey(d)),this._safeSet(this._prefix(d),l(g))},remove:function(c){return this.ls.removeItem(this._ttlKey(c)),this.ls.removeItem(this._prefix(c)),this},clear:function(){var d,c=j(this.keyMatcher);for(d=c.length;d--;){this.remove(c[d])}return this},isExpired:function(d){var e=k(this.ls.getItem(this._ttlKey(d)));return w.isNumber(e)&&y()>e?!0:!1}}),z}(),r=function(){function j(c){c=c||{},this.cancelled=!1,this.lastReq=null,this._send=c.transport,this._get=c.limiter?c.limiter(this._get):this._get,this._cache=c.cache===!1?new t(0):a}var i=0,e={},b=6,a=new t(10);return j.setMaxPendingRequests=function(c){b=c},j.resetCache=function(){a.reset()},w.mixin(j.prototype,{_fingerprint:function(c){return c=c||{},c.url+c.type+x.param(c.data||{})},_get:function(f,d){function B(c){d(null,c),g._cache.set(y,c)}function A(){d(!0)}function z(){i--,delete e[y],g.onDeckRequestArgs&&(g._get.apply(g,g.onDeckRequestArgs),g.onDeckRequestArgs=null)}var y,l,g=this;y=this._fingerprint(f),this.cancelled||y!==this.lastReq||((l=e[y])?l.done(B).fail(A):b>i?(i++,e[y]=this._send(f).done(B).fail(A).always(z)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(l,k){var h,g;k=k||x.noop,l=w.isString(l)?{url:l}:l||{},g=this._fingerprint(l),this.cancelled=!1,this.lastReq=g,(h=this._cache.get(g))?k(null,h):this._get(l,k)},cancel:function(){this.cancelled=!0}}),j}(),q=window.SearchIndex=function(){function z(d){d=d||{},d.datumTokenizer&&d.queryTokenizer||x.error("datumTokenizer and queryTokenizer are both required"),this.identify=d.identify||w.stringify,this.datumTokenizer=d.datumTokenizer,this.queryTokenizer=d.queryTokenizer,this.reset()}function y(c){return c=w.filter(c,function(d){return !!d}),c=w.map(c,function(d){return d.toLowerCase()})}function l(){var c={};return c[a]=[],c[b]={},c}function k(g){for(var f={},A=[],i=0,h=g.length;h>i;i++){f[g[i]]||(f[g[i]]=!0,A.push(g[i]))}return A}function j(i,h){var E=0,D=0,C=[];i=i.sort(),h=h.sort();for(var B=i.length,A=h.length;B>E&&A>D;){i[E]<h[D]?E++:i[E]>h[D]?D++:(C.push(i[E]),E++,D++)}return C}var b="c",a="i";return w.mixin(z.prototype,{bootstrap:function(c){this.datums=c.datums,this.trie=c.trie},add:function(d){var e=this;d=w.isArray(d)?d:[d],w.each(d,function(c){var i,h;e.datums[i=e.identify(c)]=c,h=y(e.datumTokenizer(c)),w.each(h,function(A){var f,C,B;for(f=e.trie,C=A.split("");B=C.shift();){f=f[b][B]||(f[b][B]=l()),f[a].push(i)}})})},get:function(d){var e=this;return w.map(d,function(c){return e.datums[c]})},search:function(d){var h,g,f=this;return h=y(this.queryTokenizer(d)),w.each(h,function(i){var e,C,B,A;if(g&&0===g.length){return !1}for(e=f.trie,C=i.split("");e&&(B=C.shift());){e=e[b][B]}return e&&0===C.length?(A=e[a].slice(0),void (g=g?j(g,A):A)):(g=[],!1)}),g?w.map(k(g),function(c){return f.datums[c]}):[]},all:function(){var d=[];for(var c in this.datums){d.push(this.datums[c])}return d},reset:function(){this.datums={},this.trie=l()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),z}(),p=function(){function b(c){this.url=c.url,this.ttl=c.ttl,this.cache=c.cache,this.prepare=c.prepare,this.transform=c.transform,this.transport=c.transport,this.thumbprint=c.thumbprint,this.storage=new s(c.cacheKey)}var d;return d={data:"data",protocol:"protocol",thumbprint:"thumbprint"},w.mixin(b.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(c){this.cache&&(this.storage.set(d.data,c,this.ttl),this.storage.set(d.protocol,location.protocol,this.ttl),this.storage.set(d.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var e,c={};return this.cache?(c.data=this.storage.get(d.data),c.protocol=this.storage.get(d.protocol),c.thumbprint=this.storage.get(d.thumbprint),e=c.thumbprint!==this.thumbprint||c.protocol!==location.protocol,c.data&&!e?c.data:null):null},fromNetwork:function(g){function f(){g(!0)}function j(a){g(null,h.transform(a))}var i,h=this;g&&(i=this.prepare(this._settings()),this.transport(i).fail(f).done(j))},clear:function(){return this.storage.clear(),this}}),b}(),o=function(){function b(c){this.url=c.url,this.prepare=c.prepare,this.transform=c.transform,this.transport=new r({cache:c.cache,limiter:c.limiter,transport:c.transport})}return w.mixin(b.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(g,f){function j(d,e){f(d?[]:h.transform(e))}var i,h=this;if(f){return g=g||"",i=this.prepare(g,this._settings()),this.transport.get(i,j)}},cancelLastRequest:function(){this.transport.cancel()}}),b}(),n=function(){function j(g){var f;return g?(f={url:null,ttl:86400000,cache:!0,cacheKey:null,thumbprint:"",prepare:w.identity,transform:w.identity,transport:null},g=w.isString(g)?{url:g}:g,g=w.mixin(f,g),!g.url&&x.error("prefetch requires url to be set"),g.transform=g.filter||g.transform,g.cacheKey=g.cacheKey||g.url,g.thumbprint=v+g.thumbprint,g.transport=g.transport?a(g.transport):x.ajax,g):null}function i(f){var e;if(f){return e={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:w.identity,transport:null},f=w.isString(f)?{url:f}:f,f=w.mixin(e,f),!f.url&&x.error("remote requires url to be set"),f.transform=f.filter||f.transform,f.prepare=c(f),f.limiter=b(f),f.transport=f.transport?a(f.transport):x.ajax,delete f.replace,delete f.wildcard,delete f.rateLimitBy,delete f.rateLimitWait,f}}function c(k){function h(e,d){return d.url=y(d.url,e),d}function B(e,d){return d.url=d.url.replace(l,encodeURIComponent(e)),d}function A(e,d){return d}var z,y,l;return z=k.prepare,y=k.replace,l=k.wildcard,z?z:z=y?h:k.wildcard?B:A}function b(h){function A(d){return function(e){return w.debounce(e,d)}}function z(d){return function(e){return w.throttle(e,d)}}var y,l,k;return y=h.limiter,l=h.rateLimitBy,k=h.rateLimitWait,y||(y=/^throttle$/i.test(l)?z(k):A(k)),y}function a(d){return function(y){function l(e){w.defer(function(){h.resolve(e)})}function k(e){w.defer(function(){h.reject(e)})}var h=x.Deferred();return d(y,l,k),h}}return function(h){var e,d;return e={initialize:!0,identify:w.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},h=w.mixin(e,h||{}),!h.datumTokenizer&&x.error("datumTokenizer is required"),!h.queryTokenizer&&x.error("queryTokenizer is required"),d=h.sorter,h.sorter=d?function(f){return f.sort(d)}:w.identity,h.local=w.isFunction(h.local)?h.local():h.local,h.prefetch=j(h.prefetch),h.remote=i(h.remote),h}}(),m=function(){function b(c){c=n(c),this.sorter=c.sorter,this.identify=c.identify,this.sufficient=c.sufficient,this.local=c.local,this.remote=c.remote?new o(c.remote):null,this.prefetch=c.prefetch?new p(c.prefetch):null,this.index=new q({identify:this.identify,datumTokenizer:c.datumTokenizer,queryTokenizer:c.queryTokenizer}),c.initialize!==!1&&this.initialize()}var a;return a=window&&window.Bloodhound,b.noConflict=function(){return window&&(window.Bloodhound=a),b},b.tokenizers=u,w.mixin(b.prototype,{__ttAdapter:function(){function e(g,c,h){return f.search(g,c,h)}function d(g,c){return f.search(g,c)}var f=this;return this.remote?e:d},_loadPrefetch:function(){function f(d,c){return d?i.reject():(g.add(c),g.prefetch.store(g.index.serialize()),void i.resolve())}var i,h,g=this;return i=x.Deferred(),this.prefetch?(h=this.prefetch.fromCache())?(this.index.bootstrap(h),i.resolve()):this.prefetch.fromNetwork(f):i.resolve(),i.promise()},_initialize:function(){function d(){c.add(c.local)}var c=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(d),this.initPromise},initialize:function(c){return !this.initPromise||c?this._initialize():this.initPromise},add:function(c){return this.index.add(c),this},get:function(c){return c=w.isArray(c)?c:[].slice.call(arguments),this.index.get(c)},search:function(h,y,l){function k(d){var e=[];w.each(d,function(c){!w.some(j,function(f){return i.identify(c)===i.identify(f)})&&e.push(c)}),l&&l(e)}var j,i=this;return j=this.sorter(this.index.search(h)),y(this.remote?j.slice():j),this.remote&&j.length<this.sufficient?this.remote.get(h,k):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return r.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),b}();return m});