!function(d,c){"object"==typeof exports?module.exports=c():"function"==typeof define&&define.amd?define([],c):d.Circles=c()}(this,function(){var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){setTimeout(b,1000/60)},c=function(f){var e=f.id;if(this._el=document.getElementById(e),null!==this._el){this._radius=f.radius||10,this._duration=void 0===f.duration?500:f.duration,this._value=0,this._maxValue=f.maxValue||100,this._text=void 0===f.text?function(b){return this.htmlifyNumber(b)}:f.text,this._strokeWidth=f.width||10,this._colors=f.colors||["#EEE","#F00"],this._svg=null,this._movingPath=null,this._wrapContainer=null,this._textContainer=null,this._wrpClass=f.wrpClass||"circles-wrp",this._textClass=f.textClass||"circles-text",this._valClass=f.valueStrokeClass||"circles-valueStroke",this._maxValClass=f.maxValueStrokeClass||"circles-maxValueStroke",this._styleWrapper=f.styleWrapper===!1?!1:!0,this._styleText=f.styleText===!1?!1:!0;var g=Math.PI/180*270;this._start=-Math.PI/180*90,this._startPrecise=this._precise(this._start),this._circ=g-this._start,this._generate().update(f.value||0)}};return c.prototype={VERSION:"0.0.6",_generate:function(){return this._svgSize=2*this._radius,this._radiusAdjusted=this._radius-this._strokeWidth/2,this._generateSvg()._generateText()._generateWrapper(),this._el.innerHTML="",this._el.appendChild(this._wrapContainer),this},_setPercentage:function(b){this._movingPath.setAttribute("d",this._calculatePath(b,!0)),this._textContainer.innerHTML=this._getText(this.getValueFromPercent(b))},_generateWrapper:function(){return this._wrapContainer=document.createElement("div"),this._wrapContainer.className=this._wrpClass,this._styleWrapper&&(this._wrapContainer.style.position="relative",this._wrapContainer.style.display="inline-block"),this._wrapContainer.appendChild(this._svg),this._wrapContainer.appendChild(this._textContainer),this},_generateText:function(){if(this._textContainer=document.createElement("div"),this._textContainer.className=this._textClass,this._styleText){var f={position:"absolute",top:0,left:0,textAlign:"center",width:"100%",fontSize:0.7*this._radius+"px",height:this._svgSize+"px",lineHeight:this._svgSize+"px"};for(var e in f){this._textContainer.style[e]=f[e]}}return this._textContainer.innerHTML=this._getText(0),this},_getText:function(b){return this._text?(void 0===b&&(b=this._value),b=parseFloat(b.toFixed(2)),"function"==typeof this._text?this._text.call(this,b):this._text):""},_generateSvg:function(){return this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svg.setAttribute("xmlns","http://www.w3.org/2000/svg"),this._svg.setAttribute("width",this._svgSize),this._svg.setAttribute("height",this._svgSize),this._generatePath(100,!1,this._colors[0],this._maxValClass)._generatePath(1,!0,this._colors[1],this._valClass),this._movingPath=this._svg.getElementsByTagName("path")[1],this},_generatePath:function(g,f,j,i){var h=document.createElementNS("http://www.w3.org/2000/svg","path");return h.setAttribute("fill","transparent"),h.setAttribute("stroke",j),h.setAttribute("stroke-width",this._strokeWidth),h.setAttribute("d",this._calculatePath(g,f)),h.setAttribute("class",i),this._svg.appendChild(h),this},_calculatePath:function(f,e){var h=this._start+f/100*this._circ,g=this._precise(h);return this._arc(g,e)},_arc:function(f,e){var h=f-0.001,g=f-this._startPrecise<Math.PI?0:1;return["M",this._radius+this._radiusAdjusted*Math.cos(this._startPrecise),this._radius+this._radiusAdjusted*Math.sin(this._startPrecise),"A",this._radiusAdjusted,this._radiusAdjusted,0,g,1,this._radius+this._radiusAdjusted*Math.cos(h),this._radius+this._radiusAdjusted*Math.sin(h),e?"":"Z"].join(" ")},_precise:function(b){return Math.round(1000*b)/1000},htmlifyNumber:function(g,f,j){f=f||"circles-integer",j=j||"circles-decimals";var i=(g+"").split("."),h='<span class="'+f+'">'+i[0]+"</span>";return i.length>1&&(h+='.<span class="'+j+'">'+i[1].substring(0,2)+"</span>"),h},updateRadius:function(b){return this._radius=b,this._generate().update(!0)},updateWidth:function(b){return this._strokeWidth=b,this._generate().update(!0)},updateColors:function(f){this._colors=f;var e=this._svg.getElementsByTagName("path");return e[0].setAttribute("stroke",f[0]),e[1].setAttribute("stroke",f[1]),this},getPercent:function(){return 100*this._value/this._maxValue},getValueFromPercent:function(b){return this._maxValue*b/100},getValue:function(){return this._value},getMaxValue:function(){return this._maxValue},update:function(t,s){if(t===!0){return this._setPercentage(this.getPercent()),this}if(this._value==t||isNaN(t)){return this}void 0===s&&(s=this._duration);var r,q,p,o,n=this,m=n.getPercent(),l=1;return this._value=Math.min(this._maxValue,Math.max(0,t)),s?(r=n.getPercent(),q=r>m,l+=r%1,p=Math.floor(Math.abs(r-m)/l),o=s/p,function a(e){if(q?m+=l:m-=l,q&&m>=r||!q&&r>=m){return void d(function(){n._setPercentage(r)})}d(function(){n._setPercentage(m)});var h=Date.now(),g=h-e;g>=o?a(h):setTimeout(function(){a(Date.now())},o-g)}(Date.now()),this):(this._setPercentage(this.getPercent()),this)}},c.create=function(b){return new c(b)},c});