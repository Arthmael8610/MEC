/*!
 * # Semantic UI 2.2.12 - Dropdown
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(h,e,f,g){e=(typeof e!="undefined"&&e.Math==Math)?e:(typeof self!="undefined"&&self.Math==Math)?self:Function("return this")();h.fn.dropdown=function(a){var c=h(this),s=h(f),q=c.selector||"",r=("ontouchstart" in f.documentElement),u=new Date().getTime(),d=[],p=arguments[0],v=(typeof p=="string"),b=[].slice.call(arguments,1),t;c.each(function(am){var k=(h.isPlainObject(a))?h.extend(true,{},h.fn.dropdown.settings,a):h.extend({},h.fn.dropdown.settings),l=k.className,aq=k.message,aE=k.fields,ai=k.keys,aB=k.metadata,ab=k.namespace,au=k.regExp,av=k.selector,aj=k.error,aA=k.templates,ay="."+ab,aC="module-"+ab,at=h(this),aa=h(k.context),ad=at.find(av.text),aD=at.find(av.search),j=at.find(av.sizer),ah=at.find(av.input),al=at.find(av.icon),ap=(at.prev().find(av.text).length>0)?at.prev().find(av.text):at.prev(),aw=at.children(av.menu),ac=aw.find(av.item),af=false,n=false,ar=false,ao=this,o=at.data(aC),i,ak,an,m,ae,az,ag,ax;ax={initialize:function(){ax.debug("Initializing dropdown",k);if(ax.is.alreadySetup()){ax.setup.reference()}else{ax.setup.layout();if(k.values){ax.change.values(k.values)}ax.refreshData();ax.save.defaults();ax.restore.selected();ax.create.id();ax.bind.events();ax.observeChanges();ax.instantiate()}},instantiate:function(){ax.verbose("Storing instance of dropdown",ax);o=ax;at.data(aC,ax)},destroy:function(){ax.verbose("Destroying previous dropdown",at);ax.remove.tabbable();at.off(ay).removeData(aC);aw.off(ay);s.off(m);ax.disconnect.menuObserver();ax.disconnect.selectObserver()},observeChanges:function(){if("MutationObserver" in e){az=new MutationObserver(ax.event.select.mutation);ag=new MutationObserver(ax.event.menu.mutation);ax.debug("Setting up mutation observer",az,ag);ax.observe.select();ax.observe.menu()}},disconnect:{menuObserver:function(){if(ag){ag.disconnect()}},selectObserver:function(){if(az){az.disconnect()}}},observe:{select:function(){if(ax.has.input()){az.observe(at[0],{childList:true,subtree:true})}},menu:function(){if(ax.has.menu()){ag.observe(aw[0],{childList:true,subtree:true})}}},create:{id:function(){ae=(Math.random().toString(16)+"000000000").substr(2,8);m="."+ae;ax.verbose("Creating unique id for element",ae)},userChoice:function(z){var w,y,A,x;z=z||ax.get.userValues();if(!z){return false}z=h.isArray(z)?z:[z];h.each(z,function(C,B){if(ax.get.item(B)===false){x=k.templates.addition(ax.add.variables(aq.addResult,B));y=h("<div />").html(x).attr("data-"+aB.value,B).attr("data-"+aB.text,B).addClass(l.addition).addClass(l.item);if(k.hideAdditions){y.addClass(l.hidden)}w=(w===g)?y:w.add(y);ax.verbose("Creating user choices for value",B,y)}});return w},userLabels:function(w){var x=ax.get.userValues();if(x){ax.debug("Adding user labels",x);h.each(x,function(z,y){ax.verbose("Adding custom user value");ax.add.label(y,y)})}},menu:function(){aw=h("<div />").addClass(l.menu).appendTo(at)},sizer:function(){j=h("<span />").addClass(l.sizer).insertAfter(aD)}},search:function(w){w=(w!==g)?w:ax.get.query();ax.verbose("Searching for query",w);if(ax.has.minCharacters(w)){ax.filter(w)}else{ax.hide()}},select:{firstUnfiltered:function(){ax.verbose("Selecting first non-filtered element");ax.remove.selectedItem();ac.not(av.unselectable).not(av.addition+av.hidden).eq(0).addClass(l.selected)},nextAvailable:function(x){x=x.eq(0);var y=x.nextAll(av.item).not(av.unselectable).eq(0),w=x.prevAll(av.item).not(av.unselectable).eq(0),z=(y.length>0);if(z){ax.verbose("Moving selection to",y);y.addClass(l.selected)}else{ax.verbose("Moving selection to",w);w.addClass(l.selected)}}},setup:{api:function(){var w={debug:k.debug,urlData:{value:ax.get.value(),query:ax.get.query()},on:false};ax.verbose("First request, initializing API");at.api(w)},layout:function(){if(at.is("select")){ax.setup.select();ax.setup.returnedObject()}if(!ax.has.menu()){ax.create.menu()}if(ax.is.search()&&!ax.has.search()){ax.verbose("Adding search input");aD=h("<input />").addClass(l.search).prop("autocomplete","off").insertBefore(ad)}if(ax.is.multiple()&&ax.is.searchSelection()&&!ax.has.sizer()){ax.create.sizer()}if(k.allowTab){ax.set.tabbable()}},select:function(){var w=ax.get.selectValues();ax.debug("Dropdown initialized on a select",w);if(at.is("select")){ah=at}if(ah.parent(av.dropdown).length>0){ax.debug("UI dropdown already exists. Creating dropdown menu only");at=ah.closest(av.dropdown);if(!ax.has.menu()){ax.create.menu()}aw=at.children(av.menu);ax.setup.menu(w)}else{ax.debug("Creating entire dropdown from select");at=h("<div />").attr("class",ah.attr("class")).addClass(l.selection).addClass(l.dropdown).html(aA.dropdown(w)).insertBefore(ah);if(ah.hasClass(l.multiple)&&ah.prop("multiple")===false){ax.error(aj.missingMultiple);ah.prop("multiple",true)}if(ah.is("[multiple]")){ax.set.multiple()}if(ah.prop("disabled")){ax.debug("Disabling dropdown");at.addClass(l.disabled)}ah.removeAttr("class").detach().prependTo(at)}ax.refresh()},menu:function(w){aw.html(aA.menu(w,aE));ac=aw.find(av.item)},reference:function(){ax.debug("Dropdown behavior was called on select, replacing with closest dropdown");at=at.parent(av.dropdown);o=at.data(aC);ao=at.get(0);ax.refresh();ax.setup.returnedObject()},returnedObject:function(){var w=c.slice(0,am),x=c.slice(am+1);c=w.add(at).add(x)}},refresh:function(){ax.refreshSelectors();ax.refreshData()},refreshItems:function(){ac=aw.find(av.item)},refreshSelectors:function(){ax.verbose("Refreshing selector cache");ad=at.find(av.text);aD=at.find(av.search);ah=at.find(av.input);al=at.find(av.icon);ap=(at.prev().find(av.text).length>0)?at.prev().find(av.text):at.prev();aw=at.children(av.menu);ac=aw.find(av.item)},refreshData:function(){ax.verbose("Refreshing cached metadata");ac.removeData(aB.text).removeData(aB.value)},clearData:function(){ax.verbose("Clearing metadata");ac.removeData(aB.text).removeData(aB.value);at.removeData(aB.defaultText).removeData(aB.defaultValue).removeData(aB.placeholderText)},toggle:function(){ax.verbose("Toggling menu visibility");if(!ax.is.active()){ax.show()}else{ax.hide()}},show:function(w){w=h.isFunction(w)?w:function(){};if(!ax.can.show()&&ax.is.remote()){ax.debug("No API results retrieved, searching before show");ax.queryRemote(ax.get.query(),ax.show)}if(ax.can.show()&&!ax.is.active()){ax.debug("Showing dropdown");if(ax.has.message()&&!(ax.has.maxSelections()||ax.has.allResultsFiltered())){ax.remove.message()}if(ax.is.allFiltered()){return true}if(k.onShow.call(ao)!==false){ax.animate.show(function(){if(ax.can.click()){ax.bind.intent()}if(ax.has.menuSearch()){ax.focusSearch()}ax.set.visible();w.call(ao)})}}},hide:function(w){w=h.isFunction(w)?w:function(){};if(ax.is.active()){ax.debug("Hiding dropdown");if(k.onHide.call(ao)!==false){ax.animate.hide(function(){ax.remove.visible();w.call(ao)})}}},hideOthers:function(){ax.verbose("Finding other dropdowns to hide");c.not(at).has(av.menu+"."+l.visible).dropdown("hide")},hideMenu:function(){ax.verbose("Hiding menu  instantaneously");ax.remove.active();ax.remove.visible();aw.transition("hide")},hideSubMenus:function(){var w=aw.children(av.item).find(av.menu);ax.verbose("Hiding sub menus",w);w.transition("hide")},bind:{events:function(){if(r){ax.bind.touchEvents()}ax.bind.keyboardEvents();ax.bind.inputEvents();ax.bind.mouseEvents()},touchEvents:function(){ax.debug("Touch device detected binding additional touch events");if(ax.is.searchSelection()){}else{if(ax.is.single()){at.on("touchstart"+ay,ax.event.test.toggle)}}aw.on("touchstart"+ay,av.item,ax.event.item.mouseenter)},keyboardEvents:function(){ax.verbose("Binding keyboard events");at.on("keydown"+ay,ax.event.keydown);if(ax.has.search()){at.on(ax.get.inputEvent()+ay,av.search,ax.event.input)}if(ax.is.multiple()){s.on("keydown"+m,ax.event.document.keydown)}},inputEvents:function(){ax.verbose("Binding input change events");at.on("change"+ay,av.input,ax.event.change)},mouseEvents:function(){ax.verbose("Binding mouse events");if(ax.is.multiple()){at.on("click"+ay,av.label,ax.event.label.click).on("click"+ay,av.remove,ax.event.remove.click)}if(ax.is.searchSelection()){at.on("mousedown"+ay,ax.event.mousedown).on("mouseup"+ay,ax.event.mouseup).on("mousedown"+ay,av.menu,ax.event.menu.mousedown).on("mouseup"+ay,av.menu,ax.event.menu.mouseup).on("click"+ay,av.icon,ax.event.icon.click).on("focus"+ay,av.search,ax.event.search.focus).on("click"+ay,av.search,ax.event.search.focus).on("blur"+ay,av.search,ax.event.search.blur).on("click"+ay,av.text,ax.event.text.focus);if(ax.is.multiple()){at.on("click"+ay,ax.event.click)}}else{if(k.on=="click"){at.on("click"+ay,av.icon,ax.event.icon.click).on("click"+ay,ax.event.test.toggle)}else{if(k.on=="hover"){at.on("mouseenter"+ay,ax.delay.show).on("mouseleave"+ay,ax.delay.hide)}else{at.on(k.on+ay,ax.toggle)}}at.on("mousedown"+ay,ax.event.mousedown).on("mouseup"+ay,ax.event.mouseup).on("focus"+ay,ax.event.focus);if(ax.has.menuSearch()){at.on("blur"+ay,av.search,ax.event.search.blur)}else{at.on("blur"+ay,ax.event.blur)}}aw.on("mouseenter"+ay,av.item,ax.event.item.mouseenter).on("mouseleave"+ay,av.item,ax.event.item.mouseleave).on("click"+ay,av.item,ax.event.item.click)},intent:function(){ax.verbose("Binding hide intent event to document");if(r){s.on("touchstart"+m,ax.event.test.touch).on("touchmove"+m,ax.event.test.touch)}s.on("click"+m,ax.event.test.hide)}},unbind:{intent:function(){ax.verbose("Removing hide intent event from document");if(r){s.off("touchstart"+m).off("touchmove"+m)}s.off("click"+m)}},filter:function(w){var y=(w!==g)?w:ax.get.query(),x=function(){if(ax.is.multiple()){ax.filterActive()}if(w||(!w&&ax.get.activeItem().length==0)){ax.select.firstUnfiltered()}if(ax.has.allResultsFiltered()){if(k.onNoResults.call(ao,y)){if(k.allowAdditions){if(k.hideAdditions){ax.verbose("User addition with no menu, setting empty style");ax.set.empty();ax.hideMenu()}}else{ax.verbose("All items filtered, showing message",y);ax.add.message(aq.noResults)}}else{ax.verbose("All items filtered, hiding dropdown",y);ax.hideMenu()}}else{ax.remove.empty();ax.remove.message()}if(k.allowAdditions){ax.add.userSuggestion(w)}if(ax.is.searchSelection()&&ax.can.show()&&ax.is.focusedOnSearch()){ax.show()}};if(k.useLabels&&ax.has.maxSelections()){return}if(k.apiSettings){if(ax.can.useAPI()){ax.queryRemote(y,function(){if(k.filterRemoteData){ax.filterItems(y)}x()})}else{ax.error(aj.noAPI)}}else{ax.filterItems(y);x()}},queryRemote:function(x,w){var y={errorDuration:false,cache:"local",throttle:k.throttle,urlData:{query:x},onError:function(){ax.add.message(aq.serverError);w()},onFailure:function(){ax.add.message(aq.serverError);w()},onSuccess:function(z){ax.remove.message();ax.setup.menu({values:z[aE.remoteValues]});w()}};if(!at.api("get request")){ax.setup.api()}y=h.extend(true,{},y,k.apiSettings);at.api("setting",y).api("query")},filterItems:function(w){var z=(w!==g)?w:ax.get.query(),y=null,A=ax.escape.string(z),x=new RegExp("^"+A,"igm");if(ax.has.query()){y=[];ax.verbose("Searching for matching values",z);ac.each(function(){var D=h(this),B,C;if(k.match=="both"||k.match=="text"){B=String(ax.get.choiceText(D,false));if(B.search(x)!==-1){y.push(this);return true}else{if(k.fullTextSearch==="exact"&&ax.exactSearch(z,B)){y.push(this);return true}else{if(k.fullTextSearch===true&&ax.fuzzySearch(z,B)){y.push(this);return true}}}}if(k.match=="both"||k.match=="value"){C=String(ax.get.choiceValue(D,B));if(C.search(x)!==-1){y.push(this);return true}else{if(k.fullTextSearch==="exact"&&ax.exactSearch(z,C)){y.push(this);return true}else{if(k.fullTextSearch===true&&ax.fuzzySearch(z,C)){y.push(this);return true}}}}})}ax.debug("Showing only matched items",z);ax.remove.filteredItem();if(y){ac.not(y).addClass(l.filtered)}},fuzzySearch:function(y,A){var w=A.length,B=y.length;y=y.toLowerCase();A=A.toLowerCase();if(B>w){return false}if(B===w){return(y===A)}search:for(var x=0,C=0;x<B;x++){var z=y.charCodeAt(x);while(C<w){if(A.charCodeAt(C++)===z){continue search}}return false}return true},exactSearch:function(w,x){w=w.toLowerCase();x=x.toLowerCase();if(x.indexOf(w)>-1){return true}return false},filterActive:function(){if(k.useLabels){ac.filter("."+l.active).addClass(l.filtered)}},focusSearch:function(w){if(ax.has.search()&&!ax.is.focusedOnSearch()){if(w){at.off("focus"+ay,av.search);aD.focus();at.on("focus"+ay,av.search,ax.event.search.focus)}else{aD.focus()}}},forceSelection:function(){var y=ac.not(l.filtered).filter("."+l.selected).eq(0),w=ac.not(l.filtered).filter("."+l.active).eq(0),x=(y.length>0)?y:w,z=(x.length>0);if(z&&!ax.is.multiple()){ax.debug("Forcing partial selection to selected item",x);ax.event.item.click.call(x,{},true);return}else{if(k.allowAdditions){ax.set.selected(ax.get.query());ax.remove.searchTerm()}else{ax.remove.searchTerm()}}},change:{values:function(w){if(!k.allowAdditions){ax.clear()}ax.debug("Creating dropdown with specified values",w);ax.setup.menu({values:w});h.each(w,function(y,x){if(x.selected==true){ax.debug("Setting initial selection to",x.value);ax.set.selected(x.value);return true}})}},event:{change:function(){if(!ar){ax.debug("Input changed, updating selection");ax.set.selected()}},focus:function(){if(k.showOnFocus&&!af&&ax.is.hidden()&&!ak){ax.show()}},blur:function(w){ak=(f.activeElement===this);if(!af&&!ak){ax.remove.activeLabel();ax.hide()}},mousedown:function(){if(ax.is.searchSelection()){an=true}else{af=true}},mouseup:function(){if(ax.is.searchSelection()){an=false}else{af=false}},click:function(w){var x=h(w.target);if(x.is(at)){if(!ax.is.focusedOnSearch()){ax.focusSearch()}else{ax.show()}}},search:{focus:function(){af=true;if(ax.is.multiple()){ax.remove.activeLabel()}if(k.showOnFocus){ax.search()}},blur:function(w){ak=(f.activeElement===this);if(ax.is.searchSelection()&&!an){if(!n&&!ak){if(k.forceSelection){ax.forceSelection()}ax.hide()}}an=false}},icon:{click:function(w){ax.toggle()}},text:{focus:function(w){af=true;ax.focusSearch()}},input:function(w){if(ax.is.multiple()||ax.is.searchSelection()){ax.set.filtered()}clearTimeout(ax.timer);ax.timer=setTimeout(ax.search,k.delay.search)},label:{click:function(x){var B=h(this),z=at.find(av.label),C=z.filter("."+l.active),A=B.nextAll("."+l.active),y=B.prevAll("."+l.active),w=(A.length>0)?B.nextUntil(A).add(C).add(B):B.prevUntil(y).add(C).add(B);if(x.shiftKey){C.removeClass(l.active);w.addClass(l.active)}else{if(x.ctrlKey){B.toggleClass(l.active)}else{C.removeClass(l.active);B.addClass(l.active)}}k.onLabelSelect.apply(this,z.filter("."+l.active))}},remove:{click:function(){var w=h(this).parent();if(w.hasClass(l.active)){ax.remove.activeLabels()}else{ax.remove.activeLabels(w)}}},test:{toggle:function(w){var x=(ax.is.multiple())?ax.show:ax.toggle;if(ax.is.bubbledLabelClick(w)||ax.is.bubbledIconClick(w)){return}if(ax.determine.eventOnElement(w,x)){w.preventDefault()}},touch:function(w){ax.determine.eventOnElement(w,function(){if(w.type=="touchstart"){ax.timer=setTimeout(function(){ax.hide()},k.delay.touch)}else{if(w.type=="touchmove"){clearTimeout(ax.timer)}}});w.stopPropagation()},hide:function(w){ax.determine.eventInModule(w,ax.hide)}},select:{mutation:function(w){ax.debug("<select> modified, recreating menu");var x=false;h.each(w,function(y,z){if(h(z.target).is("select")||h(z.addedNodes).is("select")){x=true;return true}});if(x){ax.disconnect.selectObserver();ax.refresh();ax.setup.select();ax.set.selected();ax.observe.select()}}},menu:{mutation:function(B){var z=B[0],y=z.addedNodes?h(z.addedNodes[0]):h(false),C=z.removedNodes?h(z.removedNodes[0]):h(false),A=y.add(C),w=A.is(av.addition)||A.closest(av.addition).length>0,x=A.is(av.message)||A.closest(av.message).length>0;if(w||x){ax.debug("Updating item selector cache");ax.refreshItems()}else{ax.debug("Menu modified, updating selector cache");ax.refresh()}},mousedown:function(){n=true},mouseup:function(){n=false}},item:{mouseenter:function(y){var C=h(y.target),B=h(this),w=B.children(av.menu),A=B.siblings(av.item).children(av.menu),x=(w.length>0),z=(w.find(C).length>0);if(!z&&x){clearTimeout(ax.itemTimer);ax.itemTimer=setTimeout(function(){ax.verbose("Showing sub-menu",w);h.each(A,function(){ax.animate.hide(false,h(this))});ax.animate.show(false,w)},k.delay.show);y.preventDefault()}},mouseleave:function(x){var w=h(this).children(av.menu);if(w.length>0){clearTimeout(ax.itemTimer);ax.itemTimer=setTimeout(function(){ax.verbose("Hiding sub-menu",w);ax.animate.hide(false,w)},k.delay.hide)}},click:function(E,C){var x=h(this),D=(E)?h(E.target):h(""),A=x.find(av.menu),y=ax.get.choiceText(x),B=ax.get.choiceValue(x,y),w=(A.length>0),z=(A.find(D).length>0);if(ax.has.menuSearch()){h(f.activeElement).blur()}if(!z&&(!w||k.allowCategorySelection)){if(ax.is.searchSelection()){if(k.allowAdditions){ax.remove.userAddition()}ax.remove.searchTerm();if(!ax.is.focusedOnSearch()&&!(C==true)){ax.focusSearch(true)}}if(!k.useLabels){ax.remove.filteredItem();ax.set.scrollPosition(x)}ax.determine.selectAction.call(this,y,B)}}},document:{keydown:function(M){var z=M.which,C=ax.is.inObject(z,ai);if(C){var B=at.find(av.label),x=B.filter("."+l.active),I=x.data(aB.value),w=B.index(x),L=B.length,H=(x.length>0),K=(x.length>1),y=(w===0),A=(w+1==L),D=ax.is.searchSelection(),G=ax.is.focusedOnSearch(),J=ax.is.focused(),E=(G&&ax.get.caretPosition()===0),F;if(D&&!H&&!G){return}if(z==ai.leftArrow){if((J||E)&&!H){ax.verbose("Selecting previous label");B.last().addClass(l.active)}else{if(H){if(!M.shiftKey){ax.verbose("Selecting previous label");B.removeClass(l.active)}else{ax.verbose("Adding previous label to selection")}if(y&&!K){x.addClass(l.active)}else{x.prev(av.siblingLabel).addClass(l.active).end()}M.preventDefault()}}}else{if(z==ai.rightArrow){if(J&&!H){B.first().addClass(l.active)}if(H){if(!M.shiftKey){ax.verbose("Selecting next label");B.removeClass(l.active)}else{ax.verbose("Adding next label to selection")}if(A){if(D){if(!G){ax.focusSearch()}else{B.removeClass(l.active)}}else{if(K){x.next(av.siblingLabel).addClass(l.active)}else{x.addClass(l.active)}}}else{x.next(av.siblingLabel).addClass(l.active)}M.preventDefault()}}else{if(z==ai.deleteKey||z==ai.backspace){if(H){ax.verbose("Removing active labels");if(A){if(D&&!G){ax.focusSearch()}}x.last().next(av.siblingLabel).addClass(l.active);ax.remove.activeLabels(x);M.preventDefault()}else{if(E&&!H&&z==ai.backspace){ax.verbose("Removing last label on input backspace");x=B.last().addClass(l.active);ax.remove.activeLabels(x)}}}else{x.removeClass(l.active)}}}}}},keydown:function(C){var K=C.which,E=ax.is.inObject(K,ai);if(E){var I=ac.not(av.unselectable).filter("."+l.selected).eq(0),w=aw.children("."+l.active).eq(0),y=(I.length>0)?I:w,G=(y.length>0)?y.siblings(":not(."+l.filtered+")").addBack():aw.children(":not(."+l.filtered+")"),L=y.children(av.menu),J=y.closest(av.menu),x=(J.hasClass(l.visible)||J.hasClass(l.animating)||J.parent(av.menu).length>0),z=(L.length>0),A=(y.length>0),H=(y.not(av.unselectable).length>0),B=(K==ai.delimiter&&k.allowAdditions&&ax.is.multiple()),N=(k.allowAdditions&&k.hideAdditions&&(K==ai.enter||B)&&H),F,D,M;if(N){ax.verbose("Selecting item from keyboard shortcut",y);ax.event.item.click.call(y,C);if(ax.is.searchSelection()){ax.remove.searchTerm()}}if(ax.is.visible()){if(K==ai.enter||B){if(K==ai.enter&&A&&z&&!k.allowCategorySelection){ax.verbose("Pressed enter on unselectable category, opening sub menu");K=ai.rightArrow}else{if(H){ax.verbose("Selecting item from keyboard shortcut",y);ax.event.item.click.call(y,C);if(ax.is.searchSelection()){ax.remove.searchTerm()}}}C.preventDefault()}if(A){if(K==ai.leftArrow){D=(J[0]!==aw[0]);if(D){ax.verbose("Left key pressed, closing sub-menu");ax.animate.hide(false,J);y.removeClass(l.selected);J.closest(av.item).addClass(l.selected);C.preventDefault()}}if(K==ai.rightArrow){if(z){ax.verbose("Right key pressed, opening sub-menu");ax.animate.show(false,L);y.removeClass(l.selected);L.find(av.item).eq(0).addClass(l.selected);C.preventDefault()}}}if(K==ai.upArrow){F=(A&&x)?y.prevAll(av.item+":not("+av.unselectable+")").eq(0):ac.eq(0);if(G.index(F)<0){ax.verbose("Up key pressed but reached top of current menu");C.preventDefault();return}else{ax.verbose("Up key pressed, changing active item");y.removeClass(l.selected);F.addClass(l.selected);ax.set.scrollPosition(F);if(k.selectOnKeydown&&ax.is.single()){ax.set.selectedItem(F)}}C.preventDefault()}if(K==ai.downArrow){F=(A&&x)?F=y.nextAll(av.item+":not("+av.unselectable+")").eq(0):ac.eq(0);if(F.length===0){ax.verbose("Down key pressed but reached bottom of current menu");C.preventDefault();return}else{ax.verbose("Down key pressed, changing active item");ac.removeClass(l.selected);F.addClass(l.selected);ax.set.scrollPosition(F);if(k.selectOnKeydown&&ax.is.single()){ax.set.selectedItem(F)}}C.preventDefault()}if(K==ai.pageUp){ax.scrollPage("up");C.preventDefault()}if(K==ai.pageDown){ax.scrollPage("down");C.preventDefault()}if(K==ai.escape){ax.verbose("Escape key pressed, closing dropdown");ax.hide()}}else{if(B){C.preventDefault()}if(K==ai.downArrow&&!ax.is.visible()){ax.verbose("Down key pressed, showing dropdown");ax.show();C.preventDefault()}}}else{if(!ax.has.search()){ax.set.selectedLetter(String.fromCharCode(K))}}}},trigger:{change:function(){var x=f.createEvent("HTMLEvents"),w=ah[0];if(w){ax.verbose("Triggering native change event");x.initEvent("change",true,false);w.dispatchEvent(x)}}},determine:{selectAction:function(w,x){ax.verbose("Determining action",k.action);if(h.isFunction(ax.action[k.action])){ax.verbose("Triggering preset action",k.action,w,x);ax.action[k.action].call(ao,w,x,this)}else{if(h.isFunction(k.action)){ax.verbose("Triggering user action",k.action,w,x);k.action.call(ao,w,x,this)}else{ax.error(aj.action,k.action)}}},eventInModule:function(y,w){var A=h(y.target),z=(A.closest(f.documentElement).length>0),x=(A.closest(at).length>0);w=h.isFunction(w)?w:function(){};if(z&&!x){ax.verbose("Triggering event",w);w();return true}else{ax.verbose("Event occurred in dropdown, canceling callback");return false}},eventOnElement:function(y,w){var B=h(y.target),C=B.closest(av.siblingLabel),x=f.body.contains(y.target),z=(at.find(C).length===0),A=(B.closest(aw).length===0);w=h.isFunction(w)?w:function(){};if(x&&z&&A){ax.verbose("Triggering event",w);w();return true}else{ax.verbose("Event occurred in dropdown menu, canceling callback");return false}}},action:{nothing:function(){},activate:function(w,x,y){x=(x!==g)?x:w;if(ax.can.activate(h(y))){ax.set.selected(x,h(y));if(ax.is.multiple()&&!ax.is.allFiltered()){return}else{ax.hideAndClear()}}},select:function(w,x,y){x=(x!==g)?x:w;if(ax.can.activate(h(y))){ax.set.value(x,h(y));if(ax.is.multiple()&&!ax.is.allFiltered()){return}else{ax.hideAndClear()}}},combo:function(w,x,y){x=(x!==g)?x:w;ax.set.selected(x,h(y));ax.hideAndClear()},hide:function(w,x,y){ax.set.value(x,w);ax.hideAndClear()}},get:{id:function(){return ae},defaultText:function(){return at.data(aB.defaultText)},defaultValue:function(){return at.data(aB.defaultValue)},placeholderText:function(){if(k.placeholder!="auto"&&typeof k.placeholder=="string"){return k.placeholder}return at.data(aB.placeholderText)||""},text:function(){return ad.text()},query:function(){return h.trim(aD.val())},searchWidth:function(w){w=(w!==g)?w:aD.val();j.text(w);return Math.ceil(j.width()+1)},selectionCount:function(){var x=ax.get.values(),w;w=(ax.is.multiple())?h.isArray(x)?x.length:0:(ax.get.value()!=="")?1:0;return w},transition:function(w){return(k.transition=="auto")?ax.is.upward(w)?"slide up":"slide down":k.transition},userValues:function(){var w=ax.get.values();if(!w){return false}w=h.isArray(w)?w:[w];return h.grep(w,function(x){return(ax.get.item(x)===false)})},uniqueArray:function(w){return h.grep(w,function(x,y){return h.inArray(x,w)===y})},caretPosition:function(){var x=aD.get(0),y,w;if("selectionStart" in x){return x.selectionStart}else{if(f.selection){x.focus();y=f.selection.createRange();w=y.text.length;y.moveStart("character",-x.value.length);return y.text.length-w}}},value:function(){var x=(ah.length>0)?ah.val():at.data(aB.value),w=(h.isArray(x)&&x.length===1&&x[0]==="");return(x===g||w)?"":x},values:function(){var w=ax.get.value();if(w===""){return""}return(!ax.has.selectInput()&&ax.is.multiple())?(typeof w=="string")?w.split(k.delimiter):"":w},remoteValues:function(){var x=ax.get.values(),w=false;if(x){if(typeof x=="string"){x=[x]}h.each(x,function(z,y){var A=ax.read.remoteData(y);ax.verbose("Restoring value from session data",A,y);if(A){if(!w){w={}}w[y]=A}})}return w},choiceText:function(w,x){x=(x!==g)?x:k.preserveHTML;if(w){if(w.find(av.menu).length>0){ax.verbose("Retrieving text of element with sub-menu");w=w.clone();w.find(av.menu).remove();w.find(av.menuIcon).remove()}return(w.data(aB.text)!==g)?w.data(aB.text):(x)?h.trim(w.html()):h.trim(w.text())}},choiceValue:function(x,w){w=w||ax.get.choiceText(x);if(!x){return false}return(x.data(aB.value)!==g)?String(x.data(aB.value)):(typeof w==="string")?h.trim(w.toLowerCase()):String(w)},inputEvent:function(){var w=aD[0];if(w){return(w.oninput!==g)?"input":(w.onpropertychange!==g)?"propertychange":"keyup"}return false},selectValues:function(){var w={};w.values=[];at.find("option").each(function(){var x=h(this),A=x.html(),z=x.attr("disabled"),y=(x.attr("value")!==g)?x.attr("value"):A;if(k.placeholder==="auto"&&y===""){w.placeholder=A}else{w.values.push({name:A,value:y,disabled:z})}});if(k.placeholder&&k.placeholder!=="auto"){ax.debug("Setting placeholder value to",k.placeholder);w.placeholder=k.placeholder}if(k.sortSelect){w.values.sort(function(x,y){return(x.name>y.name)?1:-1});ax.debug("Retrieved and sorted values from select",w)}else{ax.debug("Retrieved values from select",w)}return w},activeItem:function(){return ac.filter("."+l.active)},selectedItem:function(){var w=ac.not(av.unselectable).filter("."+l.selected);return(w.length>0)?w:ac.eq(0)},itemWithAdditions:function(y){var w=ax.get.item(y),x=ax.create.userChoice(y),z=(x&&x.length>0);if(z){w=(w.length>0)?w.add(x):x}return w},item:function(x,A){var y=false,w,z;x=(x!==g)?x:(ax.get.values()!==g)?ax.get.values():ax.get.text();w=(z)?(x.length>0):(x!==g&&x!==null);z=(ax.is.multiple()&&h.isArray(x));A=(x===""||x===0)?true:A||false;if(w){ac.each(function(){var D=h(this),B=ax.get.choiceText(D),C=ax.get.choiceValue(D,B);if(C===null||C===g){return}if(z){if(h.inArray(String(C),x)!==-1||h.inArray(B,x)!==-1){y=(y)?y.add(D):D}}else{if(A){ax.verbose("Ambiguous dropdown value using strict type check",D,x);if(C===x||B===x){y=D;return true}}else{if(String(C)==String(x)||B==x){ax.verbose("Found select item by value",C,x);y=D;return true}}}})}return y}},check:{maxSelections:function(w){if(k.maxSelections){w=(w!==g)?w:ax.get.selectionCount();if(w>=k.maxSelections){ax.debug("Maximum selection count reached");if(k.useLabels){ac.addClass(l.filtered);ax.add.message(aq.maxSelections)}return true}else{ax.verbose("No longer at maximum selection count");ax.remove.message();ax.remove.filteredItem();if(ax.is.searchSelection()){ax.filterItems()}return false}}return true}},restore:{defaults:function(){ax.clear();ax.restore.defaultText();ax.restore.defaultValue()},defaultText:function(){var w=ax.get.defaultText(),x=ax.get.placeholderText;if(w===x){ax.debug("Restoring default placeholder text",w);ax.set.placeholderText(w)}else{ax.debug("Restoring default text",w);ax.set.text(w)}},placeholderText:function(){ax.set.placeholderText()},defaultValue:function(){var w=ax.get.defaultValue();if(w!==g){ax.debug("Restoring default value",w);if(w!==""){ax.set.value(w);ax.set.selected()}else{ax.remove.activeItem();ax.remove.selectedItem()}}},labels:function(){if(k.allowAdditions){if(!k.useLabels){ax.error(aj.labels);k.useLabels=true}ax.debug("Restoring selected values");ax.create.userLabels()}ax.check.maxSelections()},selected:function(){ax.restore.values();if(ax.is.multiple()){ax.debug("Restoring previously selected values and labels");ax.restore.labels()}else{ax.debug("Restoring previously selected values")}},values:function(){ax.set.initialLoad();if(k.apiSettings&&k.saveRemoteData&&ax.get.remoteValues()){ax.restore.remoteValues()}else{ax.set.selected()}ax.remove.initialLoad()},remoteValues:function(){var w=ax.get.remoteValues();ax.debug("Recreating selected from session data",w);if(w){if(ax.is.single()){h.each(w,function(x,y){ax.set.text(y)})}else{h.each(w,function(x,y){ax.add.label(x,y)})}}}},read:{remoteData:function(w){var x;if(e.Storage===g){ax.error(aj.noStorage);return}x=sessionStorage.getItem(w);return(x!==g)?x:false}},save:{defaults:function(){ax.save.defaultText();ax.save.placeholderText();ax.save.defaultValue()},defaultValue:function(){var w=ax.get.value();ax.verbose("Saving default value as",w);at.data(aB.defaultValue,w)},defaultText:function(){var w=ax.get.text();ax.verbose("Saving default text as",w);at.data(aB.defaultText,w)},placeholderText:function(){var w;if(k.placeholder!==false&&ad.hasClass(l.placeholder)){w=ax.get.text();ax.verbose("Saving placeholder text as",w);at.data(aB.placeholderText,w)}},remoteData:function(x,w){if(e.Storage===g){ax.error(aj.noStorage);return}ax.verbose("Saving remote data to session storage",w,x);sessionStorage.setItem(w,x)}},clear:function(){if(ax.is.multiple()&&k.useLabels){ax.remove.labels()}else{ax.remove.activeItem();ax.remove.selectedItem()}ax.set.placeholderText();ax.clearValue()},clearValue:function(){ax.set.value("")},scrollPage:function(z,I){var B=I||ax.get.selectedItem(),J=B.closest(av.menu),F=J.outerHeight(),D=J.scrollTop(),E=ac.eq(0).outerHeight(),H=Math.floor(F/E),A=J.prop("scrollHeight"),y=(z=="up")?D-(E*H):D+(E*H),x=ac.not(av.unselectable),w,C,G;G=(z=="up")?x.index(B)-H:x.index(B)+H;w=(z=="up")?(G>=0):(G<x.length);C=(w)?x.eq(G):(z=="up")?x.first():x.last();if(C.length>0){ax.debug("Scrolling page",z,C);B.removeClass(l.selected);C.addClass(l.selected);if(k.selectOnKeydown&&ax.is.single()){ax.set.selectedItem(C)}J.scrollTop(y)}},set:{filtered:function(){var x=ax.is.multiple(),B=ax.is.searchSelection(),A=(x&&B),y=(B)?ax.get.query():"",w=(typeof y==="string"&&y.length>0),z=ax.get.searchWidth(),C=y!=="";if(x&&w){ax.verbose("Adjusting input width",z,k.glyphWidth);aD.css("width",z)}if(w||(A&&C)){ax.verbose("Hiding placeholder text");ad.addClass(l.filtered)}else{if(!x||(A&&!C)){ax.verbose("Showing placeholder text");ad.removeClass(l.filtered)}}},empty:function(){at.addClass(l.empty)},loading:function(){at.addClass(l.loading)},placeholderText:function(w){w=w||ax.get.placeholderText();ax.debug("Setting placeholder text",w);ax.set.text(w);ad.addClass(l.placeholder)},tabbable:function(){if(ax.is.searchSelection()){ax.debug("Added tabindex to searchable dropdown");aD.val("").attr("tabindex",0);aw.attr("tabindex",-1)}else{ax.debug("Added tabindex to dropdown");if(at.attr("tabindex")===g){at.attr("tabindex",0);aw.attr("tabindex",-1)}}},initialLoad:function(){ax.verbose("Setting initial load");i=true},activeItem:function(w){if(k.allowAdditions&&w.filter(av.addition).length>0){w.addClass(l.filtered)}else{w.addClass(l.active)}},partialSearch:function(w){var x=ax.get.query().length;aD.val(w.substr(0,x))},scrollPosition:function(x,G){var z=5,I,D,C,E,y,A,H,F,w,B;x=x||ax.get.selectedItem();I=x.closest(av.menu);D=(x&&x.length>0);G=(G!==g)?G:false;if(x&&I.length>0&&D){y=x.position().top;I.addClass(l.loading);H=I.scrollTop();A=I.offset().top;y=x.offset().top;C=H-A+y;if(!G){F=I.height();B=H+F<(C+z);w=((C-z)<H)}ax.debug("Scrolling to active item",C);if(G||w||B){I.scrollTop(C)}I.removeClass(l.loading)}},text:function(w){if(k.action!=="select"){if(k.action=="combo"){ax.debug("Changing combo button text",w,ap);if(k.preserveHTML){ap.html(w)}else{ap.text(w)}}else{if(w!==ax.get.placeholderText()){ad.removeClass(l.placeholder)}ax.debug("Changing text",w,ad);ad.removeClass(l.filtered);if(k.preserveHTML){ad.html(w)}else{ad.text(w)}}}},selectedItem:function(z){var x=ax.get.choiceValue(z),y=ax.get.choiceText(z,false),w=ax.get.choiceText(z,true);ax.debug("Setting user selection to item",z);ax.remove.activeItem();ax.set.partialSearch(y);ax.set.activeItem(z);ax.set.selected(x,z);ax.set.text(w)},selectedLetter:function(y){var x=ac.filter("."+l.selected),z=x.length>0&&ax.has.firstLetter(x,y),A=false,w;if(z){w=x.nextAll(ac).eq(0);if(ax.has.firstLetter(w,y)){A=w}}if(!A){ac.each(function(){if(ax.has.firstLetter(h(this),y)){A=h(this);return false}})}if(A){ax.verbose("Scrolling to next value with letter",y);ax.set.scrollPosition(A);x.removeClass(l.selected);A.addClass(l.selected);if(k.selectOnKeydown&&ax.is.single()){ax.set.selectedItem(A)}}},direction:function(w){if(k.direction=="auto"){ax.remove.upward();if(ax.can.openDownward(w)){ax.remove.upward(w)}else{ax.set.upward(w)}if(!ax.is.leftward(w)&&!ax.can.openRightward(w)){ax.set.leftward(w)}}else{if(k.direction=="upward"){ax.set.upward(w)}}},upward:function(w){var x=w||at;x.addClass(l.upward)},leftward:function(w){var x=w||aw;x.addClass(l.leftward)},value:function(C,z,w){var x=ax.escape.value(C),A=(ah.length>0),D=!ax.has.value(C),B=ax.get.values(),y=(C!==g)?String(C):C,E;if(A){if(!k.allowReselection&&y==B){ax.verbose("Skipping value update already same value",C,B);if(!ax.is.initialLoad()){return}}if(ax.is.single()&&ax.has.selectInput()&&ax.can.extendSelect()){ax.debug("Adding user option",C);ax.add.optionValue(C)}ax.debug("Updating input value",x,B);ar=true;ah.val(x);if(k.fireOnInit===false&&ax.is.initialLoad()){ax.debug("Input native change event ignored on initial load")}else{ax.trigger.change()}ar=false}else{ax.verbose("Storing value in metadata",x,ah);if(x!==B){at.data(aB.value,y)}}if(k.fireOnInit===false&&ax.is.initialLoad()){ax.verbose("No callback on initial load",k.onChange)}else{k.onChange.call(ao,C,z,w)}},active:function(){at.addClass(l.active)},multiple:function(){at.addClass(l.multiple)},visible:function(){at.addClass(l.visible)},exactly:function(w,x){ax.debug("Setting selected to exact values");ax.clear();ax.set.selected(w,x)},selected:function(w,x){var y=ax.is.multiple(),z;x=(k.allowAdditions)?x||ax.get.itemWithAdditions(w):x||ax.get.item(w);if(!x){return}ax.debug("Setting selected menu item to",x);if(ax.is.multiple()){ax.remove.searchWidth()}if(ax.is.single()){ax.remove.activeItem();ax.remove.selectedItem()}else{if(k.useLabels){ax.remove.selectedItem()}}x.each(function(){var C=h(this),F=ax.get.choiceText(C),A=ax.get.choiceValue(C,F),D=C.hasClass(l.filtered),G=C.hasClass(l.active),E=C.hasClass(l.addition),B=(y&&x.length==1);if(y){if(!G||E){if(k.apiSettings&&k.saveRemoteData){ax.save.remoteData(F,A)}if(k.useLabels){ax.add.value(A,F,C);ax.add.label(A,F,B);ax.set.activeItem(C);ax.filterActive();ax.select.nextAvailable(x)}else{ax.add.value(A,F,C);ax.set.text(ax.add.variables(aq.count));ax.set.activeItem(C)}}else{if(!D){ax.debug("Selected active value, removing label");ax.remove.selected(A)}}}else{if(k.apiSettings&&k.saveRemoteData){ax.save.remoteData(F,A)}ax.set.text(F);ax.set.value(A,F,C);C.addClass(l.active).addClass(l.selected)}})}},add:{label:function(x,w,y){var A=ax.is.searchSelection()?aD:ad,z=ax.escape.value(x),B;B=h("<a />").addClass(l.label).attr("data-"+aB.value,z).html(aA.label(z,w));B=k.onLabelCreate.call(B,z,w);if(ax.has.label(x)){ax.debug("Label already exists, skipping",z);return}if(k.label.variation){B.addClass(k.label.variation)}if(y===true){ax.debug("Animating in label",B);B.addClass(l.hidden).insertBefore(A).transition(k.label.transition,k.label.duration)}else{ax.debug("Adding selection label",B);B.insertBefore(A)}},message:function(w){var y=aw.children(av.message),x=k.templates.message(ax.add.variables(w));if(y.length>0){y.html(x)}else{y=h("<div/>").html(x).addClass(l.message).appendTo(aw)}},optionValue:function(x){var y=ax.escape.value(x),w=ah.find('option[value="'+ax.escape.string(y)+'"]'),z=(w.length>0);if(z){return}ax.disconnect.selectObserver();if(ax.is.single()){ax.verbose("Removing previous user addition");ah.find("option."+l.addition).remove()}h("<option/>").prop("value",y).addClass(l.addition).html(x).appendTo(ah);ax.verbose("Adding user addition as an <option>",x);ax.observe.select()},userSuggestion:function(z){var x=aw.children(av.addition),A=ax.get.item(z),w=A&&A.not(av.addition).length,y=x.length>0,B;if(k.useLabels&&ax.has.maxSelections()){return}if(z===""||w){x.remove();return}if(y){x.data(aB.value,z).data(aB.text,z).attr("data-"+aB.value,z).attr("data-"+aB.text,z).removeClass(l.filtered);if(!k.hideAdditions){B=k.templates.addition(ax.add.variables(aq.addResult,z));x.html(B)}ax.verbose("Replacing user suggestion with new value",x)}else{x=ax.create.userChoice(z);x.prependTo(aw);ax.verbose("Adding item choice to menu corresponding with user choice addition",x)}if(!k.hideAdditions||ax.is.allFiltered()){x.addClass(l.selected).siblings().removeClass(l.selected)}ax.refreshItems()},variables:function(y,A){var B=(y.search("{count}")!==-1),C=(y.search("{maxCount}")!==-1),w=(y.search("{term}")!==-1),D,z,x;ax.verbose("Adding templated variables to message",y);if(B){z=ax.get.selectionCount();y=y.replace("{count}",z)}if(C){z=ax.get.selectionCount();y=y.replace("{maxCount}",k.maxSelections)}if(w){x=A||ax.get.query();y=y.replace("{term}",x)}return y},value:function(w,A,y){var z=ax.get.values(),x;if(w===""){ax.debug("Cannot select blank values from multiselect");return}if(h.isArray(z)){x=z.concat([w]);x=ax.get.uniqueArray(x)}else{x=[w]}if(ax.has.selectInput()){if(ax.can.extendSelect()){ax.debug("Adding value to select",w,x,ah);ax.add.optionValue(w)}}else{x=x.join(k.delimiter);ax.debug("Setting hidden input to delimited value",x,ah)}if(k.fireOnInit===false&&ax.is.initialLoad()){ax.verbose("Skipping onadd callback on initial load",k.onAdd)}else{k.onAdd.call(ao,w,A,y)}ax.set.value(x,w,A,y);ax.check.maxSelections()}},remove:{active:function(){at.removeClass(l.active)},activeLabel:function(){at.find(av.label).removeClass(l.active)},empty:function(){at.removeClass(l.empty)},loading:function(){at.removeClass(l.loading)},initialLoad:function(){i=false},upward:function(w){var x=w||at;x.removeClass(l.upward)},leftward:function(w){var x=w||aw;x.removeClass(l.leftward)},visible:function(){at.removeClass(l.visible)},activeItem:function(){ac.removeClass(l.active)},filteredItem:function(){if(k.useLabels&&ax.has.maxSelections()){return}if(k.useLabels&&ax.is.multiple()){ac.not("."+l.active).removeClass(l.filtered)}else{ac.removeClass(l.filtered)}ax.remove.empty()},optionValue:function(x){var y=ax.escape.value(x),w=ah.find('option[value="'+ax.escape.string(y)+'"]'),z=(w.length>0);if(!z||!w.hasClass(l.addition)){return}if(az){az.disconnect();ax.verbose("Temporarily disconnecting mutation observer")}w.remove();ax.verbose("Removing user addition as an <option>",y);if(az){az.observe(ah[0],{childList:true,subtree:true})}},message:function(){aw.children(av.message).remove()},searchWidth:function(){aD.css("width","")},searchTerm:function(){ax.verbose("Cleared search term");aD.val("");ax.set.filtered()},userAddition:function(){ac.filter(av.addition).remove()},selected:function(w,x){x=(k.allowAdditions)?x||ax.get.itemWithAdditions(w):x||ax.get.item(w);if(!x){return false}x.each(function(){var A=h(this),y=ax.get.choiceText(A),z=ax.get.choiceValue(A,y);if(ax.is.multiple()){if(k.useLabels){ax.remove.value(z,y,A);ax.remove.label(z)}else{ax.remove.value(z,y,A);if(ax.get.selectionCount()===0){ax.set.placeholderText()}else{ax.set.text(ax.add.variables(aq.count))}}}else{ax.remove.value(z,y,A)}A.removeClass(l.filtered).removeClass(l.active);if(k.useLabels){A.removeClass(l.selected)}})},selectedItem:function(){ac.removeClass(l.selected)},value:function(y,w,A){var z=ax.get.values(),x;if(ax.has.selectInput()){ax.verbose("Input is <select> removing selected option",y);x=ax.remove.arrayValue(y,z);ax.remove.optionValue(y)}else{ax.verbose("Removing from delimited values",y);x=ax.remove.arrayValue(y,z);x=x.join(k.delimiter)}if(k.fireOnInit===false&&ax.is.initialLoad()){ax.verbose("No callback on initial load",k.onRemove)}else{k.onRemove.call(ao,y,w,A)}ax.set.value(x,w,A);ax.check.maxSelections()},arrayValue:function(w,x){if(!h.isArray(x)){x=[x]}x=h.grep(x,function(y){return(w!=y)});ax.verbose("Removed value from delimited string",w,x);return x},label:function(w,x){var y=at.find(av.label),z=y.filter("[data-"+aB.value+'="'+ax.escape.string(w)+'"]');ax.verbose("Removing label",z);z.remove()},activeLabels:function(w){w=w||at.find(av.label).filter("."+l.active);ax.verbose("Removing active label selections",w);ax.remove.labels(w)},labels:function(w){w=w||at.find(av.label);ax.verbose("Removing labels",w);w.each(function(){var y=h(this),x=y.data(aB.value),z=(x!==g)?String(x):x,A=ax.is.userValue(z);if(k.onLabelRemove.call(y,x)===false){ax.debug("Label remove callback cancelled removal");return}ax.remove.message();if(A){ax.remove.value(z);ax.remove.label(z)}else{ax.remove.selected(z)}})},tabbable:function(){if(ax.is.searchSelection()){ax.debug("Searchable dropdown initialized");aD.removeAttr("tabindex");aw.removeAttr("tabindex")}else{ax.debug("Simple selection dropdown initialized");at.removeAttr("tabindex");aw.removeAttr("tabindex")}}},has:{menuSearch:function(){return(ax.has.search()&&aD.closest(aw).length>0)},search:function(){return(aD.length>0)},sizer:function(){return(j.length>0)},selectInput:function(){return(ah.is("select"))},minCharacters:function(w){if(k.minCharacters){w=(w!==g)?String(w):String(ax.get.query());return(w.length>=k.minCharacters)}return true},firstLetter:function(z,y){var w,x;if(!z||z.length===0||typeof y!=="string"){return false}w=ax.get.choiceText(z,false);y=y.toLowerCase();x=String(w).charAt(0).toLowerCase();return(y==x)},input:function(){return(ah.length>0)},items:function(){return(ac.length>0)},menu:function(){return(aw.length>0)},message:function(){return(aw.children(av.message).length!==0)},label:function(w){var x=ax.escape.value(w),y=at.find(av.label);return(y.filter("[data-"+aB.value+'="'+ax.escape.string(x)+'"]').length>0)},maxSelections:function(){return(k.maxSelections&&ax.get.selectionCount()>=k.maxSelections)},allResultsFiltered:function(){var w=ac.not(av.addition);return(w.filter(av.unselectable).length===w.length)},userSuggestion:function(){return(aw.children(av.addition).length>0)},query:function(){return(ax.get.query()!=="")},value:function(w){var y=ax.get.values(),x=h.isArray(y)?y&&(h.inArray(w,y)!==-1):(y==w);return(x)?true:false}},is:{active:function(){return at.hasClass(l.active)},bubbledLabelClick:function(w){return h(w.target).is("select, input")&&at.closest("label").length>0},bubbledIconClick:function(w){return h(w.target).closest(al).length>0},alreadySetup:function(){return(at.is("select")&&at.parent(av.dropdown).data(aC)!==g&&at.prev().length===0)},animating:function(w){return(w)?w.transition&&w.transition("is animating"):aw.transition&&aw.transition("is animating")},leftward:function(w){var x=w||aw;return x.hasClass(l.leftward)},disabled:function(){return at.hasClass(l.disabled)},focused:function(){return(f.activeElement===at[0])},focusedOnSearch:function(){return(f.activeElement===aD[0])},allFiltered:function(){return((ax.is.multiple()||ax.has.search())&&!(k.hideAdditions==false&&ax.has.userSuggestion())&&!ax.has.message()&&ax.has.allResultsFiltered())},hidden:function(w){return !ax.is.visible(w)},initialLoad:function(){return i},inObject:function(w,y){var x=false;h.each(y,function(A,z){if(z==w){x=true;return true}});return x},multiple:function(){return at.hasClass(l.multiple)},remote:function(){return k.apiSettings&&ax.can.useAPI()},single:function(){return !ax.is.multiple()},selectMutation:function(x){var w=false;h.each(x,function(y,z){if(z.target&&h(z.target).is("select")){w=true;return true}});return w},search:function(){return at.hasClass(l.search)},searchSelection:function(){return(ax.has.search()&&aD.parent(av.dropdown).length===1)},selection:function(){return at.hasClass(l.selection)},userValue:function(w){return(h.inArray(w,ax.get.userValues())!==-1)},upward:function(w){var x=w||at;return x.hasClass(l.upward)},visible:function(w){return(w)?w.hasClass(l.visible):aw.hasClass(l.visible)},verticallyScrollableContext:function(){var w=(aa.get(0)!==e)?aa.css("overflow-y"):false;return(w=="auto"||w=="scroll")},horizontallyScrollableContext:function(){var w=(aa.get(0)!==e)?aa.css("overflow-X"):false;return(w=="auto"||w=="scroll")}},can:{activate:function(w){if(k.useLabels){return true}if(!ax.has.maxSelections()){return true}if(ax.has.maxSelections()&&w.hasClass(l.active)){return true}return false},openDownward:function(w){var z=w||aw,y=true,x={},A;z.addClass(l.loading);A={context:{scrollTop:aa.scrollTop(),height:aa.outerHeight()},menu:{offset:z.offset(),height:z.outerHeight()}};if(ax.is.verticallyScrollableContext()){A.menu.offset.top+=A.context.scrollTop}x={above:(A.context.scrollTop)<=A.menu.offset.top-A.menu.height,below:(A.context.scrollTop+A.context.height)>=A.menu.offset.top+A.menu.height};if(x.below){ax.verbose("Dropdown can fit in context downward",x);y=true}else{if(!x.below&&!x.above){ax.verbose("Dropdown cannot fit in either direction, favoring downward",x);y=true}else{ax.verbose("Dropdown cannot fit below, opening upward",x);y=false}}z.removeClass(l.loading);return y},openRightward:function(w){var z=w||aw,x=true,y=false,A;z.addClass(l.loading);A={context:{scrollLeft:aa.scrollLeft(),width:aa.outerWidth()},menu:{offset:z.offset(),width:z.outerWidth()}};if(ax.is.horizontallyScrollableContext()){A.menu.offset.left+=A.context.scrollLeft}y=(A.menu.offset.left+A.menu.width>=A.context.scrollLeft+A.context.width);if(y){ax.verbose("Dropdown cannot fit in context rightward",y);x=false}z.removeClass(l.loading);return x},click:function(){return(r||k.on=="click")},extendSelect:function(){return k.allowAdditions||k.apiSettings},show:function(){return !ax.is.disabled()&&(ax.has.items()||ax.has.message())},useAPI:function(){return h.fn.api!==g}},animate:{show:function(w,x){var A=x||aw,y=(x)?function(){}:function(){ax.hideSubMenus();ax.hideOthers();ax.set.active()},z;w=h.isFunction(w)?w:function(){};ax.verbose("Doing menu show animation",A);ax.set.direction(x);z=ax.get.transition(x);if(ax.is.selection()){ax.set.scrollPosition(ax.get.selectedItem(),true)}if(ax.is.hidden(A)||ax.is.animating(A)){if(z=="none"){y();A.transition("show");w.call(ao)}else{if(h.fn.transition!==g&&at.transition("is supported")){A.transition({animation:z+" in",debug:k.debug,verbose:k.verbose,duration:k.duration,queue:true,onStart:y,onComplete:function(){w.call(ao)}})}else{ax.error(aj.noTransition,z)}}}},hide:function(w,x){var B=x||aw,A=(x)?(k.duration*0.9):k.duration,y=(x)?function(){}:function(){if(ax.can.click()){ax.unbind.intent()}ax.remove.active()},z=ax.get.transition(x);w=h.isFunction(w)?w:function(){};if(ax.is.visible(B)||ax.is.animating(B)){ax.verbose("Doing menu hide animation",B);if(z=="none"){y();B.transition("hide");w.call(ao)}else{if(h.fn.transition!==g&&at.transition("is supported")){B.transition({animation:z+" out",duration:k.duration,debug:k.debug,verbose:k.verbose,queue:true,onStart:y,onComplete:function(){w.call(ao)}})}else{ax.error(aj.transition)}}}}},hideAndClear:function(){ax.remove.searchTerm();if(ax.has.maxSelections()){return}if(ax.has.search()){ax.hide(function(){ax.remove.filteredItem()})}else{ax.hide()}},delay:{show:function(){ax.verbose("Delaying show event to ensure user intent");clearTimeout(ax.timer);ax.timer=setTimeout(ax.show,k.delay.show)},hide:function(){ax.verbose("Delaying hide event to ensure user intent");clearTimeout(ax.timer);ax.timer=setTimeout(ax.hide,k.delay.hide)}},escape:{value:function(w){var y=h.isArray(w),B=(typeof w==="string"),z=(!B&&!y),x=(B&&w.search(au.quote)!==-1),A=[];if(z||!x){return w}ax.debug("Encoding quote values for use in select",w);if(y){h.each(w,function(D,C){A.push(C.replace(au.quote,"&quot;"))});return A}return w.replace(au.quote,"&quot;")},string:function(w){w=String(w);return w.replace(au.escape,"\\$&")}},setting:function(x,w){ax.debug("Changing setting",x,w);if(h.isPlainObject(x)){h.extend(true,k,x)}else{if(w!==g){if(h.isPlainObject(k[x])){h.extend(true,k[x],w)}else{k[x]=w}}else{return k[x]}}},internal:function(x,w){if(h.isPlainObject(x)){h.extend(true,ax,x)}else{if(w!==g){ax[x]=w}else{return ax[x]}}},debug:function(){if(!k.silent&&k.debug){if(k.performance){ax.performance.log(arguments)}else{ax.debug=Function.prototype.bind.call(console.info,console,k.name+":");ax.debug.apply(console,arguments)}}},verbose:function(){if(!k.silent&&k.verbose&&k.debug){if(k.performance){ax.performance.log(arguments)}else{ax.verbose=Function.prototype.bind.call(console.info,console,k.name+":");ax.verbose.apply(console,arguments)}}},error:function(){if(!k.silent){ax.error=Function.prototype.bind.call(console.error,console,k.name+":");ax.error.apply(console,arguments)}},performance:{log:function(x){var y,w,z;if(k.performance){y=new Date().getTime();z=u||y;w=y-z;u=y;d.push({Name:x[0],Arguments:[].slice.call(x,1)||"",Element:ao,"Execution Time":w})}clearTimeout(ax.performance.timer);ax.performance.timer=setTimeout(ax.performance.display,500)},display:function(){var w=k.name+":",x=0;u=false;clearTimeout(ax.performance.timer);h.each(d,function(z,y){x+=y["Execution Time"]});w+=" "+x+"ms";if(q){w+=" '"+q+"'"}if((console.group!==g||console.table!==g)&&d.length>0){console.groupCollapsed(w);if(console.table){console.table(d)}else{h.each(d,function(z,y){console.log(y.Name+": "+y["Execution Time"]+"ms")})}console.groupEnd()}d=[]}},invoke:function(x,B,z){var A=o,w,y,C;B=B||b;z=ao||z;if(typeof x=="string"&&A!==g){x=x.split(/[\. ]/);w=x.length-1;h.each(x,function(F,D){var E=(F!=w)?D+x[F+1].charAt(0).toUpperCase()+x[F+1].slice(1):x;if(h.isPlainObject(A[E])&&(F!=w)){A=A[E]}else{if(A[E]!==g){y=A[E];return false}else{if(h.isPlainObject(A[D])&&(F!=w)){A=A[D]}else{if(A[D]!==g){y=A[D];return false}else{ax.error(aj.method,x);return false}}}}})}if(h.isFunction(y)){C=y.apply(z,B)}else{if(y!==g){C=y}}if(h.isArray(t)){t.push(C)}else{if(t!==g){t=[t,C]}else{if(C!==g){t=C}}}return y}};if(v){if(o===g){ax.initialize()}ax.invoke(p)}else{if(o!==g){o.invoke("destroy")}ax.initialize()}});return(t!==g)?t:c};h.fn.dropdown.settings={silent:false,debug:false,verbose:false,performance:true,on:"click",action:"activate",values:false,apiSettings:false,selectOnKeydown:true,minCharacters:0,filterRemoteData:false,saveRemoteData:true,throttle:200,context:e,direction:"auto",keepOnScreen:true,match:"both",fullTextSearch:false,placeholder:"auto",preserveHTML:true,sortSelect:false,forceSelection:true,allowAdditions:false,hideAdditions:true,maxSelections:false,useLabels:true,delimiter:",",showOnFocus:true,allowReselection:false,allowTab:true,allowCategorySelection:false,fireOnInit:false,transition:"auto",duration:200,glyphWidth:1.037,label:{transition:"scale",duration:200,variation:false},delay:{hide:300,show:200,search:20,touch:50},onChange:function(b,a,c){},onAdd:function(b,a,c){},onRemove:function(b,a,c){},onLabelSelect:function(a){},onLabelCreate:function(b,a){return h(this)},onLabelRemove:function(a){return true},onNoResults:function(a){return true},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",noStorage:"Saving remote data requires session storage",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>"},regExp:{escape:/[-[\]{}()*+?.,\\^$|#\s]/g,quote:/"/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{remoteValues:"results",values:"values",disabled:"disabled",name:"name",value:"value",text:"text"},keys:{backspace:8,delimiter:188,deleteKey:46,enter:13,escape:27,pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},selector:{addition:".addition",dropdown:".ui.dropdown",hidden:".hidden",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input, .menu input.search",sizer:"> input.sizer",text:"> .text:not(.icon)",unselectable:".disabled, .filtered"},className:{active:"active",addition:"addition",animating:"animating",disabled:"disabled",empty:"empty",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",sizer:"sizer",search:"search",selected:"selected",selection:"selection",upward:"upward",leftward:"left",visible:"visible"}};h.fn.dropdown.settings.templates={dropdown:function(d){var a=d.placeholder||false,c=d.values||{},b="";b+='<i class="dropdown icon"></i>';if(d.placeholder){b+='<div class="default text">'+a+"</div>"}else{b+='<div class="text"></div>'}b+='<div class="menu">';h.each(d.values,function(l,k){b+=(k.disabled)?'<div class="disabled item" data-value="'+k.value+'">'+k.name+"</div>":'<div class="item" data-value="'+k.value+'">'+k.name+"</div>"});b+="</div>";return b},menu:function(b,d){var c=b[d.values]||{},a="";h.each(c,function(o,n){var m=(n[d.text])?'data-text="'+n[d.text]+'"':"",p=(n[d.disabled])?"disabled ":"";a+='<div class="'+p+'item" data-value="'+n[d.value]+'"'+m+">";a+=n[d.name];a+="</div>"});return a},label:function(b,a){return a+'<i class="delete icon"></i>'},message:function(a){return a},addition:function(a){return a}}})(jQuery,window,document);