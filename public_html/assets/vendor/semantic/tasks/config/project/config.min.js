var extend=require("extend"),fs=require("fs"),path=require("path"),defaults=require("../defaults");module.exports={getPath:function(d,b){var c,a=function(f){var e=path.resolve(path.join(f,path.sep,"..")),g=path.normalize(path.join(f,d));if(fs.existsSync(g)){c=path.normalize(f);return}else{if(e==f){return}a(e,d)}};d=d||defaults.files.config;b=b||path.join(__dirname,path.sep,"..");a(b);return c||""},addDerivedValues:function(c){c=c||extend(false,{},defaults);var a=this.getPath(),e={},b={},d;for(d in c.paths.source){if(c.paths.source.hasOwnProperty(d)){e[d]=path.resolve(path.join(a,c.base,c.paths.source[d]))}}for(d in c.paths.output){if(c.paths.output.hasOwnProperty(d)){b[d]=path.resolve(path.join(a,c.base,c.paths.output[d]))}}c.paths.source=e;c.paths.output=b;c.paths.clean=path.resolve(path.join(a,c.base,c.paths.clean));c.paths.assets={source:"../../themes",uncompressed:"./"+path.relative(c.paths.output.uncompressed,c.paths.output.themes).replace(/\\/g,"/"),compressed:"./"+path.relative(c.paths.output.compressed,c.paths.output.themes).replace(/\\/g,"/"),packaged:"./"+path.relative(c.paths.output.packaged,c.paths.output.themes).replace(/\\/g,"/")};if(c.permission){c.hasPermissions=true}else{c.permission={};c.hasPermissions=false}if(!c.globs){c.globs={}}if(c.components instanceof Array){c.components=c.components.filter(function(g,f){return c.components.indexOf(g)==f})}c.globs.components=(typeof c.components=="object")?(c.components.length>1)?"{"+c.components.join(",")+"}":c.components[0]:"{"+defaults.components.join(",")+"}";return c}};