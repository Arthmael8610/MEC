(function(){var q=true,K=10,j="",I=0,ae="",V="",T=false,y={resize:1,click:1},ab=128,e=1,F=true,A="offset",J=A,ad=true,D="",s={},i=32,O=false,aj="[iFrameSizer]",m=aj.length,r="",X=false,f={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},L="parent",u="*",a=window.parent,d=0,l=false,ak=null,c=1;function ao(aq,ap,ar){if("addEventListener" in window){aq.addEventListener(ap,ar,false)}else{if("attachEvent" in window){aq.attachEvent("on"+ap,ar)}}}function b(ap){return aj+"["+r+"] "+ap}function p(ap){if(O&&("object"===typeof window.console)){console.log(b(ap))}}function w(ap){if("object"===typeof window.console){console.warn(b(ap))}}function af(){p("Initializing iFrame");R();Z();v("background",j);v("padding",V);ai();U();h();k();ac();s=M();S("init","Init message from host page")}function R(){var aq=D.substr(m).split(":");function ap(ar){return"true"===ar?true:false}r=aq[0];I=(undefined!==aq[1])?Number(aq[1]):I;T=(undefined!==aq[2])?ap(aq[2]):T;O=(undefined!==aq[3])?ap(aq[3]):O;i=(undefined!==aq[4])?Number(aq[4]):i;X=(undefined!==aq[5])?ap(aq[5]):X;q=(undefined!==aq[6])?ap(aq[6]):q;ae=aq[7];J=(undefined!==aq[8])?aq[8]:J;j=aq[9];V=aq[10];d=(undefined!==aq[11])?Number(aq[11]):d;s.enable=(undefined!==aq[12])?ap(aq[12]):false;L=aq[13]}function aa(ap,aq){if(-1!==aq.indexOf("-")){w("Negative CSS value ignored for "+ap);aq=""}return aq}function v(ap,aq){if((undefined!==aq)&&(""!==aq)&&("null"!==aq)){document.body.style[ap]=aq;p("Body "+ap+' set to "'+aq+'"')}}function Z(){if(undefined===ae){ae=I+"px"}aa("margin",ae);v("margin",ae)}function h(){document.documentElement.style.height="";document.body.style.height="";p('HTML & body height set to "auto"')}function an(ap){function aq(ar){ao(window,ar,function(at){S(ap.eventName,ap.eventType)})}if(ap.eventNames&&Array.prototype.map){ap.eventName=ap.eventNames[0];ap.eventNames.map(aq)}else{aq(ap.eventName)}p("Added event listener: "+ap.eventType)}function z(){an({eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]});an({eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]});an({eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]});an({eventType:"Device Orientation Change",eventName:"deviceorientation"});an({eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]});an({eventType:"Window Clicked",eventName:"click"});if("child"===L){an({eventType:"IFrame Resized",eventName:"resize"})}}function U(){if(A!==J){if(!(J in P)){w(J+" is not a valid option for heightCalculationMethod.");J="bodyScroll"}p('Height calculation method set to "'+J+'"')}}function ac(){if(true===q){z();g()}else{p("Auto Resize disabled")}}function ai(){var ap=document.createElement("div");ap.style.clear="both";ap.style.display="block";document.body.appendChild(ap)}function M(){function av(){return{x:(window.pageXOffset!==undefined)?window.pageXOffset:document.documentElement.scrollLeft,y:(window.pageYOffset!==undefined)?window.pageYOffset:document.documentElement.scrollTop}}function at(ay){var aA=ay.getBoundingClientRect(),az=av();return{x:parseInt(aA.left,10)+parseInt(az.x,10),y:parseInt(aA.top,10)+parseInt(az.y,10)}}function au(ay){var aC=ay.split("#")[1]||"";var az=decodeURIComponent(aC);function aA(aE){var aD=at(aE);p("Moving to in page link (#"+aC+") at x: "+aD.x+" y: "+aD.y);W(aD.y,aD.x,"scrollToOffset")}var aB=document.getElementById(az)||document.getElementsByName(az)[0];if(aB){aA(aB)}else{p("In page link (#"+aC+") not found in iFrame, so sending to parent");W(0,0,"inPageLink","#"+aC)}}function aq(){if(""!==location.hash&&"#"!==location.hash){au(location.href)}}function ar(){function ay(aA){function az(aB){aB.preventDefault();au(this.getAttribute("href"))}if("#"!==aA.getAttribute("href")){ao(aA,"click",az)}}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),ay)}function aw(){ao(window,"hashchange",aq)}function ax(){setTimeout(aq,ab)}function ap(){if(Array.prototype.forEach&&document.querySelectorAll){p("Setting up location.hash handlers");ar();aw();ax()}else{w("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}}if(s.enable){ap()}else{p("In page linking not enabled")}return{findTarget:au}}function k(){if(X){p("Enable public methods");window.parentIFrame={close:function au(){W(0,0,"close")},getId:function ar(){return r},moveToAnchor:function ap(az){s.findTarget(az)},reset:function at(){G("parentIFrame.reset")},scrollTo:function ay(az,aA){W(aA,az,"scrollTo")},scrollToOffset:function ay(az,aA){W(aA,az,"scrollToOffset")},sendMessage:function av(aA,az){W(0,0,"message",JSON.stringify(aA),az)},setHeightCalculationMethod:function ax(az){J=az;U()},setTargetOrigin:function aq(az){p("Set targetOrigin: "+az);u=az},size:function aw(aB,aA){var az=""+(aB?aB:"")+(aA?","+aA:"");x();S("size","parentIFrame.size("+az+")",aB,aA)}}}}function H(){if(0!==i){p("setInterval: "+i+"ms");setInterval(function(){S("interval","setInterval: "+i)},Math.abs(i))}}function n(aq){function ap(at){if(at.height===undefined||at.width===undefined||0===at.height||0===at.width){p("Attach listener to "+at.src);ao(at,"load",function ar(){S("imageLoad","Image loaded")})}}aq.forEach(function(at){if(at.type==="attributes"&&at.attributeName==="src"){ap(at.target)}else{if(at.type==="childList"){var ar=at.target.querySelectorAll("img");Array.prototype.forEach.call(ar,function(au){ap(au)})}}})}function g(){var aq=window.MutationObserver||window.WebKitMutationObserver;function ap(){var au=document.querySelector("body"),at={attributes:true,attributeOldValue:false,characterData:true,characterDataOldValue:false,childList:true,subtree:true},ar=new aq(function(av){S("mutationObserver","mutationObserver: "+av[0].target+" "+av[0].type);n(av)});p("Enable MutationObserver");ar.observe(au,at)}if(aq){if(0>i){H()}else{ap()}}else{w("MutationObserver not supported in this browser!");H()}}function t(){function ap(au){function ar(ay){var av=/^\d+(px)?$/i;if(av.test(ay)){return parseInt(ay,K)}var ax=aq.style.left,aw=aq.runtimeStyle.left;aq.runtimeStyle.left=aq.currentStyle.left;aq.style.left=ay||0;ay=aq.style.pixelLeft;aq.style.left=ax;aq.runtimeStyle.left=aw;return ay}var aq=document.body,at=0;if(("defaultView" in document)&&("getComputedStyle" in document.defaultView)){at=document.defaultView.getComputedStyle(aq,null);at=(null!==at)?at[au]:0}else{at=ar(aq.currentStyle[au])}return parseInt(at,K)}return document.body.offsetHeight+ap("marginTop")+ap("marginBottom")}function C(){return document.body.scrollHeight}function o(){return document.documentElement.offsetHeight}function B(){return document.documentElement.scrollHeight}function E(){var ar=document.querySelectorAll("body *"),aq=ar.length,au=0,at=new Date().getTime();for(var ap=0;ap<aq;ap++){if(ar[ap].getBoundingClientRect().bottom>au){au=ar[ap].getBoundingClientRect().bottom}}at=new Date().getTime()-at;p("Parsed "+aq+" HTML elements");p("LowestElement bottom position calculated in "+at+"ms");return au}function am(){return[t(),C(),o(),B()]}function ah(){return Math.max.apply(null,am())}function N(){return Math.min.apply(null,am())}function Y(){return Math.max(t(),E())}var P={offset:t,bodyOffset:t,bodyScroll:C,documentElementOffset:o,scroll:B,documentElementScroll:B,max:ah,min:N,grow:ah,lowestElement:Y};function al(){return Math.max(document.documentElement.scrollWidth,document.body.scrollWidth)}function S(aA,au,aB,ax){var aq,ap;function aw(){if(!(aA in {reset:1,resetPage:1,init:1})){p("Trigger event: "+au)}}function at(){e=aq;c=ap;W(e,c,aA)}function az(){return l&&(aA in y)}function aD(){function aE(aG,aF){var aH=Math.abs(aG-aF)<=d;return !aH}aq=(undefined!==aB)?aB:P[J]();ap=(undefined!==ax)?ax:al();return aE(e,aq)||(T&&aE(c,ap))}function ar(){return !(aA in {init:1,interval:1,size:1})}function aC(){return(J in f)}function ay(){p("No change in size detected")}function av(){if(ar()&&aC()){G(au)}else{if(!(aA in {interval:1})){aw();ay()}}}if(!az()){if(aD()){aw();x();at()}else{av()}}else{p("Trigger event cancelled: "+aA)}}function x(){if(!l){l=true;p("Trigger event lock on")}clearTimeout(ak);ak=setTimeout(function(){l=false;p("Trigger event lock off");p("--")},ab)}function Q(ap){e=P[J]();c=al();W(e,c,ap)}function G(aq){var ap=J;J=A;p("Reset trigger event: "+aq);x();Q("reset");J=ap}function W(ap,at,av,aw,ar){function aq(){if(undefined===ar){ar=u}else{p("Message targetOrigin: "+ar)}}function au(){var ax=ap+":"+at,ay=r+":"+ax+":"+av+(undefined!==aw?":"+aw:"");p("Sending message to host page ("+ay+")");a.postMessage(aj+ay,ar)}aq();au()}function ag(au){function ap(){return aj===(""+au.data).substr(0,m)}function aw(){D=au.data;a=au.source;af();F=false;setTimeout(function(){ad=false},ab)}function aq(){if(!ad){p("Page size reset by host page");Q("resetPage")}else{p("Page reset ignored by init")}}function ax(){S("resizeParent","Parent window resized")}function at(){return au.data.split("]")[1]}function av(){return("iFrameResize" in window)}function ar(){return au.data.split(":")[2] in {"true":1,"false":1}}if(ap()){if(F===false){if("reset"===at()){aq()}else{if("resize"===at()){ax()}else{if(au.data!==D&&!av()){w("Unexpected message ("+au.data+")")}}}}else{if(ar()){aw()}else{w("Received message of type ("+at()+") before initialization.")}}}}ao(window,"message",ag)})();