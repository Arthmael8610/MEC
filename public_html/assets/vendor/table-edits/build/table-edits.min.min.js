!function(i,h,n,m){function l(a,d){this.element=a,this.options=i.extend({},j,d),this._defaults=j,this._name=k,this.init()}var k="editable",j={keyboard:!0,dblclick:!0,button:!0,buttonSelector:".edit",maintainWidth:!0,dropdowns:{},edit:function(){},save:function(){},cancel:function(){}};l.prototype={init:function(){this.editing=!1,this.options.dblclick&&i(this.element).css("cursor","pointer").bind("dblclick",this.toggle.bind(this)),this.options.button&&i(this.options.buttonSelector,this.element).bind("click",this.toggle.bind(this))},toggle:function(b){b.preventDefault(),this.editing=!this.editing,this.editing?this.edit():this.save()},edit:function(){var a=this,d={};i("td[data-field]",this.element).each(function(){var q,p=i(this).data("field"),o=i(this).text(),c=i(this).width();if(d[p]=o,i(this).empty(),a.options.maintainWidth&&i(this).width(c),p in a.options.dropdowns){q=i("<select></select>");for(var b=0;b<a.options.dropdowns[p].length;b++){i("<option></option>").text(a.options.dropdowns[p][b]).appendTo(q)}q.val(o).data("old-value",o).dblclick(a._captureEvent)}else{q=i('<input type="text" />').val(o).data("old-value",o).dblclick(a._captureEvent)}q.appendTo(this),a.options.keyboard&&q.keydown(a._captureKey.bind(a))}),this.options.edit.bind(this.element)(d)},save:function(){var a={};i("td[data-field]",this.element).each(function(){var b=i(":input",this).val();a[i(this).data("field")]=b,i(this).empty().text(b)}),this.options.save.bind(this.element)(a)},cancel:function(){var a={};i("td[data-field]",this.element).each(function(){var b=i(":input",this).data("old-value");a[i(this).data("field")]=b,i(this).empty().text(b)}),this.options.cancel.bind(this.element)(a)},_captureEvent:function(b){b.stopPropagation()},_captureKey:function(b){13===b.which?(this.editing=!1,this.save()):27===b.which&&(this.editing=!1,this.cancel())}},i.fn[k]=function(a){return this.each(function(){i.data(this,"plugin_"+k)||i.data(this,"plugin_"+k,new l(this,a))})}}(jQuery,window,document);