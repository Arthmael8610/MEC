(function(e,c,a,g){var d="editable",f={keyboard:true,dblclick:true,button:true,buttonSelector:".edit",maintainWidth:true,dropdowns:{},edit:function(){},save:function(){},cancel:function(){}};function b(i,h){this.element=i;this.options=e.extend({},f,h);this._defaults=f;this._name=d;this.init()}b.prototype={init:function(){this.editing=false;if(this.options.dblclick){e(this.element).css("cursor","pointer").bind("dblclick",this.toggle.bind(this))}if(this.options.button){e(this.options.buttonSelector,this.element).bind("click",this.toggle.bind(this))}},toggle:function(h){h.preventDefault();this.editing=!this.editing;if(this.editing){this.edit()}else{this.save()}},edit:function(){var h=this,i={};e("td[data-field]",this.element).each(function(){var j,n=e(this).data("field"),m=e(this).text(),l=e(this).width();i[n]=m;e(this).empty();if(h.options.maintainWidth){e(this).width(l)}if(n in h.options.dropdowns){j=e("<select></select>");for(var k=0;k<h.options.dropdowns[n].length;k++){e("<option></option>").text(h.options.dropdowns[n][k]).appendTo(j)}j.val(m).data("old-value",m).dblclick(h._captureEvent)}else{j=e('<input type="text" />').val(m).data("old-value",m).dblclick(h._captureEvent)}j.appendTo(this);if(h.options.keyboard){j.keydown(h._captureKey.bind(h))}});this.options.edit.bind(this.element)(i)},save:function(){var h=this,i={};e("td[data-field]",this.element).each(function(){var j=e(":input",this).val();i[e(this).data("field")]=j;e(this).empty().text(j)});this.options.save.bind(this.element)(i)},cancel:function(){var h=this,i={};e("td[data-field]",this.element).each(function(){var j=e(":input",this).data("old-value");i[e(this).data("field")]=j;e(this).empty().text(j)});this.options.cancel.bind(this.element)(i)},_captureEvent:function(h){h.stopPropagation()},_captureKey:function(h){if(h.which===13){this.editing=false;this.save()}else{if(h.which===27){this.editing=false;this.cancel()}}}};e.fn[d]=function(h){return this.each(function(){if(!e.data(this,"plugin_"+d)){e.data(this,"plugin_"+d,new b(this,h))}})}})(jQuery,window,document);