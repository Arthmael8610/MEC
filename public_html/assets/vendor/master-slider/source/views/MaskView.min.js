(function(b){window.MSMaskView=function(d){MSBasicView.call(this,d);this.$element.removeClass("ms-basic-view").addClass("ms-mask-view")};MSMaskView.extend(MSBasicView);var c=MSMaskView.prototype;var a=MSBasicView.prototype;c.addSlide=function(d){d.view=this;d.$frame=b("<div></div>").addClass("ms-mask-frame").append(d.$element);d.$element[0].style.position="relative";d.autoAppend=false;this.slides.push(d);this.slideList.push(d);this.slidesCount++};c.setSize=function(f,d){var g=this.slides[0].slider;for(var e=0;e<this.slidesCount;++e){this.slides[e].$frame[0].style.width=f+"px";if(!g.options.autoHeight){this.slides[e].$frame[0].style.height=d+"px"}}a.setSize.call(this,f,d)};c._horizUpdate=function(d,f){a._horizUpdate.call(this,d,f);var e=0;if(this.css3){for(e=0;e<this.slidesCount;++e){this.slideList[e].$element[0].style[window._jcsspfx+"Transform"]="translateX("+(f-this.slideList[e].position)+"px)"+this.__translate_end}return}for(e=0;e<this.slidesCount;++e){this.slideList[e].$element[0].style.left=(f-this.slideList[e].position)+"px"}};c._vertiUpdate=function(d,f){a._vertiUpdate.call(this,d,f);var e=0;if(this.css3){for(e=0;e<this.slidesCount;++e){this.slideList[e].$element[0].style[window._jcsspfx+"Transform"]="translateY("+(f-this.slideList[e].position)+"px)"+this.__translate_end}return}for(e=0;e<this.slidesCount;++e){this.slideList[e].$element[0].style.top=(f-this.slideList[e].position)+"px"}};c.__pushEnd=function(){var f=this.slides.shift();var d=this.slides[this.slidesCount-2];this.slides.push(f);if(!this.normalMode){return}var e=d.$frame[0][this.__offset]+this.spacing+this[this.__dimension];f.$frame[0].style[this.__cssProb]=e+"px";f.position=e};c.__pushStart=function(){var d=this.slides.pop();var f=this.slides[0];this.slides.unshift(d);if(!this.normalMode){return}var e=f.$frame[0][this.__offset]-this.spacing-this[this.__dimension];d.$frame[0].style[this.__cssProb]=e+"px";d.position=e};c.__updateViewList=function(){if(this.normalMode){this.viewSlidesList=this.slides;return}var e=this.viewSlidesList.slice();this.viewSlidesList=[];var f=0,g=Math.floor(this.options.viewNum/2),d;if(this.loop){for(;f!==this.options.viewNum;f++){this.viewSlidesList.push(this.slides[this.currentSlideLoc-g+f])}}else{for(f=0;f!==g&&this.index-f!==-1;f++){this.viewSlidesList.unshift(this.slideList[this.index-f])}for(f=1;f!==g&&this.index+f!==this.slidesCount;f++){this.viewSlidesList.push(this.slideList[this.index+f])}}for(f=0,d=e.length;f!==d;f++){if(this.viewSlidesList.indexOf(e[f])===-1){e[f].sleep();e[f].$frame.detach()}}e=null};c.__locateSlides=function(g,m){this.__updateViewList();m=!this.loop?this.slides.indexOf(this.viewSlidesList[0])*(this[this.__dimension]+this.spacing):m||0;var f=this.viewSlidesList.length,d;for(var h=0;h!==f;h++){var k=m+h*(this[this.__dimension]+this.spacing);d=this.viewSlidesList[h];this.$slideCont.append(d.$frame);d.wakeup(false);d.position=k;if(d.selected&&d.bgvideo){try{d.bgvideo.play()}catch(j){}}d.$frame[0].style[this.__cssProb]=k+"px"}if(g!==false){this.controller.changeTo(this.slideList[this.index].position,false,null,null,false)}};MSSlideController.registerView("mask",MSMaskView)})(jQuery);