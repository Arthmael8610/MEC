(function(c){var a=function(e){BaseControl.call(this);this.options.dir="h";this.options.autohide=true;this.options.width=4;this.options.color="#3D3D3D";this.options.margin=10;c.extend(this.options,e);this.__dimen=this.options.dir==="h"?"width":"height";this.__jdimen=this.options.dir==="h"?"outerWidth":"outerHeight";this.__pos=this.options.dir==="h"?"left":"top";this.__translate_end=window._css3d?" translateZ(0px)":"";this.__translate_start=this.options.dir==="h"?" translateX(":"translateY("};a.extend(BaseControl);var d=a.prototype;var b=BaseControl.prototype;d.setup=function(){this.$element=c("<div></div>").addClass(this.options.prefix+"sbar").addClass("ms-dir-"+this.options.dir);b.setup.call(this);if(this.slider.$controlsCont===this.cont){this.$element.appendTo(this.slider.$element)}else{this.$element.appendTo(this.cont)}this.$bar=c("<div></div>").addClass(this.options.prefix+"bar").appendTo(this.$element);if(this.slider.options.loop){console.log("WARNING, MSScrollbar cannot work with looped slider.");this.disable=true;this.$element.remove()}if(this.options.dir==="v"){this.$bar.width(this.options.width)}else{this.$bar.height(this.options.width)}this.$bar.css("background-color",this.options.color);if(!this.options.insetTo&&this.options.align){if(this.options.dir==="v"){this.$element.css({right:"auto",left:"auto"})}else{this.$element.css({top:"auto",bottom:"auto"})}var e=this.options.align;if(this.options.inset){this.$element.css(e,this.options.margin)}else{if(e==="top"){this.$element.prependTo(this.slider.$element).css({"margin-bottom":this.options.margin,position:"relative"})}else{if(e==="bottom"){this.$element.css({"margin-top":this.options.margin,position:"relative"})}else{this.slider.api.addEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this);this.align()}}}}this.checkHideUnder()};d.align=function(e){if(this.detached){return}var g=this.options.align;var f=this.slider.reserveSpace(g,this.options.margin*2+this.options.width);this.$element.css(g,-f-this.options.margin-this.options.width)};d.create=function(){if(this.disable){return}var e=this;this.scroller=this.slider.api.scroller;this.slider.api.view.addEventListener(MSViewEvents.SCROLL,this._update,this);this.slider.api.addEventListener(MSSliderEvent.RESIZE,this._resize,this);this._resize();if(this.options.autohide){this.$bar.css("opacity","0")}};d._resize=function(){this.vdimen=this.$element[this.__dimen]();this.bar_dimen=this.slider.api.view["__"+this.__dimen]*this.vdimen/this.scroller._max_value;this.$bar[this.__dimen](this.bar_dimen)};d._update=function(){var f=this.scroller.value*(this.vdimen-this.bar_dimen)/this.scroller._max_value;if(this.lvalue===f){return}this.lvalue=f;if(this.options.autohide){clearTimeout(this.hto);this.$bar.css("opacity","1");var e=this;this.hto=setTimeout(function(){e.$bar.css("opacity","0")},150)}if(f<0){this.$bar[0].style[this.__dimen]=this.bar_dimen+f+"px";return}if(f>this.vdimen-this.bar_dimen){this.$bar[0].style[this.__dimen]=this.vdimen-f+"px"}if(window._cssanim){this.$bar[0].style[window._jcsspfx+"Transform"]=this.__translate_start+f+"px)"+this.__translate_end;return}this.$bar[0].style[this.__pos]=f+"px"};d.destroy=function(){b.destroy();this.slider.api.view.removeEventListener(MSViewEvents.SCROLL,this._update,this);this.slider.api.removeEventListener(MSSliderEvent.RESIZE,this._resize,this);this.slider.api.removeEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this);this.$element.remove()};window.MSScrollbar=a;MSSlideController.registerControl("scrollbar",a)})(jQuery);