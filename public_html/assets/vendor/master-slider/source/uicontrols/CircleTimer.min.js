(function(c){var a=function(e){BaseControl.call(this);this.options.color="#A2A2A2";this.options.stroke=10;this.options.radius=4;this.options.autohide=false;c.extend(this.options,e)};a.extend(BaseControl);var d=a.prototype;var b=BaseControl.prototype;d.setup=function(){var e=this;b.setup.call(this);this.$element=c("<div></div>").addClass(this.options.prefix+"ctimer").appendTo(this.cont);this.$canvas=c("<canvas></canvas>").addClass("ms-ctimer-canvas").appendTo(this.$element);this.$bar=c("<div></div>").addClass("ms-ctimer-bullet").appendTo(this.$element);if(!this.$canvas[0].getContext){this.destroy();this.disable=true;return}this.ctx=this.$canvas[0].getContext("2d");this.prog=0;this.__w=(this.options.radius+this.options.stroke/2)*2;this.$canvas[0].width=this.__w;this.$canvas[0].height=this.__w;this.checkHideUnder()};d.create=function(){if(this.disable){return}b.create.call(this);this.slider.api.addEventListener(MSSliderEvent.WAITING,this._update,this);var e=this;this.$element.click(function(){if(e.slider.api.paused){e.slider.api.resume()}else{e.slider.api.pause()}});this._update()};d._update=function(){var e=this;c(this).stop(true).animate({prog:this.slider.api._delayProgress*0.01},{duration:200,step:function(){e._draw()}})};d._draw=function(){this.ctx.clearRect(0,0,this.__w,this.__w);this.ctx.beginPath();this.ctx.arc(this.__w*0.5,this.__w*0.5,this.options.radius,Math.PI*1.5,Math.PI*1.5+2*Math.PI*this.prog,false);this.ctx.strokeStyle=this.options.color;this.ctx.lineWidth=this.options.stroke;this.ctx.stroke()};d.destroy=function(){b.destroy();if(this.disable){return}c(this).stop(true);this.slider.api.removeEventListener(MSSliderEvent.WAITING,this._update,this);this.$element.remove()};window.MSCircleTimer=a;MSSlideController.registerControl("circletimer",a)})(jQuery);