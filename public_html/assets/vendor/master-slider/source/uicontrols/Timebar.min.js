(function(c){var b=function(e){BaseControl.call(this);this.options.autohide=false;this.options.width=4;this.options.color="#FFFFFF";this.options.inset=true;this.options.margin=0;c.extend(this.options,e)};b.extend(BaseControl);var d=b.prototype;var a=BaseControl.prototype;d.setup=function(){var e=this;a.setup.call(this);this.$element=c("<div></div>").addClass(this.options.prefix+"timerbar");a.setup.call(this);if(this.slider.$controlsCont===this.cont){this.$element.appendTo(this.slider.$element)}else{this.$element.appendTo(this.cont)}this.$bar=c("<div></div>").addClass("ms-time-bar").appendTo(this.$element);if(this.options.dir==="v"){this.$bar.width(this.options.width);this.$element.width(this.options.width)}else{this.$bar.height(this.options.width);this.$element.height(this.options.width)}this.$bar.css("background-color",this.options.color);if(!this.options.insetTo&&this.options.align){this.$element.css({top:"auto",bottom:"auto"});var f=this.options.align;if(this.options.inset){this.$element.css(f,this.options.margin)}else{if(f==="top"){this.$element.prependTo(this.slider.$element).css({"margin-bottom":this.options.margin,position:"relative"})}else{if(f==="bottom"){this.$element.css({"margin-top":this.options.margin,position:"relative"})}else{this.slider.api.addEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this);this.align()}}}}this.checkHideUnder()};d.align=function(e){if(this.detached){return}var g=this.options.align;var f=this.slider.reserveSpace(g,this.options.margin*2+this.options.width);this.$element.css(g,-f-this.options.margin-this.options.width)};d.create=function(){a.create.call(this);this.slider.api.addEventListener(MSSliderEvent.WAITING,this._update,this);this._update()};d._update=function(){this.$bar[0].style.width=this.slider.api._delayProgress+"%"};d.destroy=function(){a.destroy();this.slider.api.removeEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this);this.slider.api.removeEventListener(MSSliderEvent.WAITING,this._update,this);this.$element.remove()};window.MSTimerbar=b;MSSlideController.registerControl("timebar",b)})(jQuery);