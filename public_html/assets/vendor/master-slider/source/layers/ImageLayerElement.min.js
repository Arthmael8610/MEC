(function(b){window.MSImageLayerElement=function(){MSLayerElement.call(this);this.needPreload=true;this.__cssConfig=["width","height","margin-top","padding-top","margin-bottom","padding-left","margin-right","padding-right","margin-left","padding-bottom","left","right","top","bottom"];this.type="image"};MSImageLayerElement.extend(MSLayerElement);var c=MSImageLayerElement.prototype;var a=MSLayerElement.prototype;c.create=function(){if(this.link){var e=this.$element.parent();e.append(this.link);this.link.append(this.$element);this.link.removeClass("ms-layer");this.$element.addClass("ms-layer");e=null}a.create.call(this);if(this.$element.data("src")!=undefined){this.img_src=this.$element.data("src");this.$element.removeAttr("data-src")}else{var d=this;this.$element.on("load",function(f){d.controller.preloadCount--;if(d.controller.preloadCount===0){d.controller._onlayersReady()}}).each(b.jqLoadFix)}if(b.browser.msie){this.$element.on("dragstart",function(f){f.preventDefault()})}};c.loadImage=function(){var d=this;this.$element.preloadImg(this.img_src,function(e){d.controller.preloadCount--;if(d.controller.preloadCount===0){d.controller._onlayersReady()}})}})(jQuery);