(function(b){window.MSHotspotLayer=function(){MSLayerElement.call(this);this.__cssConfig=["margin-top","padding-top","margin-bottom","padding-left","margin-right","padding-right","margin-left","padding-bottom","left","right","top","bottom"];this.ease="Expo";this.hide_start=true;this.type="hotspot"};MSHotspotLayer.extend(MSLayerElement);var c=MSHotspotLayer.prototype;var a=MSLayerElement.prototype;c._showTT=function(){if(!this.show_cl){return}clearTimeout(this.hto);if(this._tween){this._tween.stop(true)}if(this.hide_start){this.align=this._orgAlign;this._locateTT();this.tt.css({display:"block"});this._tween=CTween.animate(this.tt,900,this.to,{ease:"easeOut"+this.ease});this.hide_start=false}};c._hideTT=function(){if(!this.show_cl){return}if(this._tween){this._tween.stop(true)}var d=this;clearTimeout(this.hto);this.hto=setTimeout(function(){d.hide_start=true;d._tween=CTween.animate(d.tt,900,d.from,{ease:"easeOut"+d.ease,complete:function(){d.tt.css("display","none")}})},200)};c._updateClassName=function(d){if(this._lastClass){this.tt.removeClass(this._lastClass)}this.tt.addClass(d);this._lastClass=d};c._alignPolicy=function(){var f=this.tt.outerHeight(false),e=Math.max(this.tt.outerWidth(false),parseInt(this.tt.css("max-width"))),g=window.innerWidth,d=window.innerHeight;switch(this.align){case"top":if(this.base_t<0){return"bottom"}break;case"right":if(this.base_l+e>g||this.base_t<0){return"bottom"}break;case"left":if(this.base_l<0||this.base_t<0){return"bottom"}break}return null};c._locateTT=function(){var g=this.$element.offset(),k=this.slide.slider.$element.offset();var j=50,f=15;this.pos_x=g.left-k.left-this.slide.slider.$element.scrollLeft();this.pos_y=g.top-k.top-this.slide.slider.$element.scrollTop();this.from={opacity:0};this.to={opacity:1};this._updateClassName("ms-tooltip-"+this.align);this.tt_arrow.css("margin-left","");var h=15,e=15;switch(this.align){case"top":var d=Math.min(this.tt.outerWidth(false),parseInt(this.tt.css("max-width")));this.base_t=this.pos_y-this.tt.outerHeight(false)-e-f;this.base_l=this.pos_x-d/2;if(this.base_l+d>window.innerWidth){this.tt_arrow.css("margin-left",-h/2+this.base_l+d-window.innerWidth+"px");this.base_l=window.innerWidth-d}if(this.base_l<0){this.base_l=0;this.tt_arrow.css("margin-left",-h/2+this.pos_x-this.tt.outerWidth(false)/2+"px")}if(window._css3d){this.from[window._jcsspfx+"Transform"]="translateY(-"+j+"px)";this.to[window._jcsspfx+"Transform"]=""}else{this.from.top=(this.base_t-j)+"px";this.to.top=this.base_t+"px"}break;case"bottom":var d=Math.min(this.tt.outerWidth(false),parseInt(this.tt.css("max-width")));this.base_t=this.pos_y+e+f;this.base_l=this.pos_x-d/2;if(this.base_l+d>window.innerWidth){this.tt_arrow.css("margin-left",-h/2+this.base_l+d-window.innerWidth+"px");this.base_l=window.innerWidth-d}if(this.base_l<0){this.base_l=0;this.tt_arrow.css("margin-left",-h/2+this.pos_x-this.tt.outerWidth(false)/2+"px")}if(window._css3d){this.from[window._jcsspfx+"Transform"]="translateY("+j+"px)";this.to[window._jcsspfx+"Transform"]=""}else{this.from.top=(this.base_t+j)+"px";this.to.top=this.base_t+"px"}break;case"right":this.base_l=this.pos_x+h+f;this.base_t=this.pos_y-this.tt.outerHeight(false)/2;if(window._css3d){this.from[window._jcsspfx+"Transform"]="translateX("+j+"px)";this.to[window._jcsspfx+"Transform"]=""}else{this.from.left=(this.base_l+j)+"px";this.to.left=this.base_l+"px"}break;case"left":this.base_l=this.pos_x-h-this.tt.outerWidth(false)-f;this.base_t=this.pos_y-this.tt.outerHeight(false)/2;if(window._css3d){this.from[window._jcsspfx+"Transform"]="translateX(-"+j+"px)";this.to[window._jcsspfx+"Transform"]=""}else{this.from.left=(this.base_l-j)+"px";this.to.left=this.base_l+"px"}break}var i=this._alignPolicy();if(i!==null){this.align=i;this._locateTT();return}this.tt.css("top",parseInt(this.base_t)+"px").css("left",parseInt(this.base_l)+"px");this.tt.css(this.from)};c.start=function(){a.start.call(this);this.tt.appendTo(this.slide.slider.$element);this.tt.css("display","none")};c.reset=function(){a.reset.call(this);this.tt.detach()};c.create=function(){var e=this;this._orgAlign=this.align=this.$element.data("align")!==undefined?this.$element.data("align"):"top";this.data=this.$element.html();this.$element.html("").on("mouseenter",function(){e._showTT()}).on("mouseleave",function(){e._hideTT()});this.point=b('<div><div class="ms-point-center"></div><div class="ms-point-border"></div></div>').addClass("ms-tooltip-point").appendTo(this.$element);var d=this.$element.data("link"),f=this.$element.data("target");if(d){this.point.on("click",function(){window.open(d,f||"_self")})}this.tt=b("<div></div>").addClass("ms-tooltip").css("display","hidden").css("opacity",0);if(this.$element.data("width")!==undefined){this.tt.css("width",this.$element.data("width")).css("max-width",this.$element.data("width"))}this.tt_arrow=b("<div></div>").addClass("ms-tooltip-arrow").appendTo(this.tt);this._updateClassName("ms-tooltip-"+this.align);this.ttcont=b("<div></div>").addClass("ms-tooltip-cont").html(this.data).appendTo(this.tt);if(this.$element.data("stay-hover")===true){this.tt.on("mouseenter",function(){if(e.hide_start){return}clearTimeout(e.hto);e._tween.stop(true);e._showTT()}).on("mouseleave",function(){e._hideTT()})}a.create.call(this)}})(jQuery);