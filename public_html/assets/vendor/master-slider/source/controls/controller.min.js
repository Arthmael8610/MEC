(function(){var a={bouncing:true,snapping:false,snapsize:null,friction:0.05,outFriction:0.05,outAcceleration:0.09,minValidDist:0.3,snappingMinSpeed:2,paging:false,endless:false,maxSpeed:160};var c=function(g,d,e){if(d===null||g===null){throw new Error("Max and Min values are required.")}this.options=e||{};for(var f in a){if(!(f in this.options)){this.options[f]=a[f]}}this._max_value=d;this._min_value=g;this.value=g;this.end_loc=g;this.current_snap=this.getSnapNum(g);this.__extrStep=0;this.__extraMove=0;this.__animID=-1};var b=c.prototype;b.changeTo=function(m,f,g,n,k){this.stopped=false;this._internalStop();m=this._checkLimits(m);g=Math.abs(g||0);if(this.options.snapping){n=n||this.getSnapNum(m);if(k!==false){this._callsnapChange(n)}this.current_snap=n}if(f){this.animating=true;var p=this,l=++p.__animID,e=m-p.value,j=0,h=m,d=1-p.options.friction,o=d+(g-20)*d*1.3/p.options.maxSpeed;var i=function(){if(l!==p.__animID){return}var q=m-p.value;if(Math.abs(q)>p.options.minValidDist&&p.animating){window.requestAnimationFrame(i)}else{if(p.animating){p.value=m;p._callrenderer()}p.animating=false;if(l!==p.__animID){p.__animID=-1}p._callonComplete("anim");return}p.value=h-e*Math.exp(-++j*o);p._callrenderer()};i();return}this.value=m;this._callrenderer()};b.drag=function(d){if(this.start_drag){this.drag_start_loc=this.value;this.start_drag=false}this.animating=false;this._deceleration=false;this.value-=d;if(!this.options.endless&&(this.value>this._max_value||this.value<0)){if(this.options.bouncing){this.__isout=true;this.value+=d*0.6}else{if(this.value>this._max_value){this.value=this._max_value}else{this.value=0}}}else{if(!this.options.endless&&this.options.bouncing){this.__isout=false}}this._callrenderer()};b.push=function(e){this.stopped=false;if(this.options.snapping&&Math.abs(e)<=this.options.snappingMinSpeed){this.cancel();return}this.__speed=e;this.__startSpeed=e;this.end_loc=this._calculateEnd();if(this.options.snapping){var f=this.getSnapNum(this.value),d=this.getSnapNum(this.end_loc);if(this.options.paging){f=this.getSnapNum(this.drag_start_loc);this.__isout=false;if(e>0){this.gotoSnap(f+1,true,e)}else{this.gotoSnap(f-1,true,e)}return}else{if(f===d){this.cancel();return}}this._callsnapChange(d);this.current_snap=d}this.animating=false;this.__needsSnap=this.options.endless||(this.end_loc>this._min_value&&this.end_loc<this._max_value);if(this.options.snapping&&this.__needsSnap){this.__extraMove=this._calculateExtraMove(this.end_loc)}this._startDecelaration()};b.bounce=function(d){if(this.animating){return}this.stopped=false;this.animating=false;this.__speed=d;this.__startSpeed=d;this.end_loc=this._calculateEnd();this._startDecelaration()};b.stop=function(){this.stopped=true;this._internalStop()};b.cancel=function(){this.start_drag=true;if(this.__isout){this.__speed=0.0004;this._startDecelaration()}else{if(this.options.snapping){this.gotoSnap(this.getSnapNum(this.value),true)}}};b.renderCallback=function(e,d){this.__renderHook={fun:e,ref:d}};b.snappingCallback=function(e,d){this.__snapHook={fun:e,ref:d}};b.snapCompleteCallback=function(e,d){this.__compHook={fun:e,ref:d}};b.getSnapNum=function(d){return Math.floor((d+this.options.snapsize/2)/this.options.snapsize)};b.nextSnap=function(){this._internalStop();var d=this.getSnapNum(this.value);if(!this.options.endless&&(d+1)*this.options.snapsize>this._max_value){this.__speed=8;this.__needsSnap=false;this._startDecelaration()}else{this.gotoSnap(d+1,true)}};b.prevSnap=function(){this._internalStop();var d=this.getSnapNum(this.value);if(!this.options.endless&&(d-1)*this.options.snapsize<this._min_value){this.__speed=-8;this.__needsSnap=false;this._startDecelaration()}else{this.gotoSnap(d-1,true)}};b.gotoSnap=function(e,d,f){this.changeTo(e*this.options.snapsize,d,f,e)};b.destroy=function(){this._internalStop();this.__renderHook=null;this.__snapHook=null;this.__compHook=null};b._internalStop=function(){this.start_drag=true;this.animating=false;this._deceleration=false;this.__extrStep=0};b._calculateExtraMove=function(e){var d=e%this.options.snapsize;return d<this.options.snapsize/2?-d:this.options.snapsize-d};b._calculateEnd=function(g){var f=this.__speed;var e=this.value;var d=0;while(Math.abs(f)>this.options.minValidDist){e+=f;f*=this.options.friction;d++}if(g){return d}return e};b._checkLimits=function(d){if(this.options.endless){return d}if(d<this._min_value){return this._min_value}if(d>this._max_value){return this._max_value}return d};b._callrenderer=function(){if(this.__renderHook){this.__renderHook.fun.call(this.__renderHook.ref,this,this.value)}};b._callsnapChange=function(d){if(!this.__snapHook||d===this.current_snap){return}this.__snapHook.fun.call(this.__snapHook.ref,this,d,d-this.current_snap)};b._callonComplete=function(d){if(this.__compHook&&!this.stopped){this.__compHook.fun.call(this.__compHook.ref,this,this.current_snap,d)}};b._computeDeceleration=function(){if(this.options.snapping&&this.__needsSnap){var e=(this.__startSpeed-this.__speed)/this.__startSpeed*this.__extraMove;this.value+=this.__speed+e-this.__extrStep;this.__extrStep=e}else{this.value+=this.__speed}this.__speed*=this.options.friction;if(!this.options.endless&&!this.options.bouncing){if(this.value<=this._min_value){this.value=this._min_value;this.__speed=0}else{if(this.value>=this._max_value){this.value=this._max_value;this.__speed=0}}}this._callrenderer();if(!this.options.endless&&this.options.bouncing){var d=0;if(this.value<this._min_value){d=this._min_value-this.value}else{if(this.value>this._max_value){d=this._max_value-this.value}}this.__isout=Math.abs(d)>=this.options.minValidDist;if(this.__isout){if(this.__speed*d<=0){this.__speed+=d*this.options.outFriction}else{this.__speed=d*this.options.outAcceleration}}}};b._startDecelaration=function(){if(this._deceleration){return}this._deceleration=true;var d=this;var e=function(){if(!d._deceleration){return}d._computeDeceleration();if(Math.abs(d.__speed)>d.options.minValidDist||d.__isout){window.requestAnimationFrame(e)}else{d._deceleration=false;d.__isout=false;if(d.__needsSnap&&d.options.snapping&&!d.options.paging){d.value=d._checkLimits(d.end_loc+d.__extraMove)}else{d.value=Math.round(d.value)}d._callrenderer();d._callonComplete("decel")}};e()};window.Controller=c})();