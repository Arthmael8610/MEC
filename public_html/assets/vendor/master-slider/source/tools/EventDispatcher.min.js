(function(){averta.EventDispatcher=function(){this.listeners={}};averta.EventDispatcher.extend=function(b){var a=new averta.EventDispatcher();for(var c in a){if(c!="constructor"){b[c]=averta.EventDispatcher.prototype[c]}}};averta.EventDispatcher.prototype={constructor:averta.EventDispatcher,addEventListener:function(b,c,a){if(!this.listeners[b]){this.listeners[b]=[]}this.listeners[b].push({listener:c,ref:a})},removeEventListener:function(c,d,b){if(this.listeners[c]){for(var a=0;a<this.listeners[c].length;++a){if(d===this.listeners[c][a].listener&&b===this.listeners[c][a].ref){this.listeners[c].splice(a--,1)}}if(this.listeners[c].length===0){this.listeners[c]=null}}},dispatchEvent:function(c){c.target=this;if(this.listeners[c.type]){for(var b=0,a=this.listeners[c.type].length;b<a;++b){this.listeners[c.type][b].listener.call(this.listeners[c.type][b].ref,c)}}}}})();