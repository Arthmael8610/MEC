(function(g){var e="ontouchstart" in document,h=window.navigator.pointerEnabled,f=!h&&window.navigator.msPointerEnabled,i=h||f,c=(h?"pointerdown ":"")+(f?"MSPointerDown ":"")+(e?"touchstart ":"")+"mousedown",a=(h?"pointermove ":"")+(f?"MSPointerMove ":"")+(e?"touchmove ":"")+"mousemove",d=(h?"pointerup ":"")+(f?"MSPointerUp ":"")+(e?"touchend ":"")+"mouseup",j=(h?"pointercancel ":"")+(f?"MSPointerCancel ":"")+"touchcancel";averta.TouchSwipe=function(k){this.$element=k;this.enabled=true;k.bind(c,{target:this},this.__touchStart);k[0].swipe=this;this.onSwipe=null;this.swipeType="horizontal";this.noSwipeSelector="input, textarea, button, .no-swipe, .ms-no-swipe";this.lastStatus={}};var b=averta.TouchSwipe.prototype;b.getDirection=function(l,k){switch(this.swipeType){case"horizontal":return l<=this.start_x?"left":"right";break;case"vertical":return k<=this.start_y?"up":"down";break;case"all":if(Math.abs(l-this.start_x)>Math.abs(k-this.start_y)){return l<=this.start_x?"left":"right"}else{return k<=this.start_y?"up":"down"}break}};b.priventDefultEvent=function(n,m){var l=Math.abs(n-this.start_x);var k=Math.abs(m-this.start_y);var o=l>k;return(this.swipeType==="horizontal"&&o)||(this.swipeType==="vertical"&&!o)};b.createStatusObject=function(k){var n={},m,l;m=this.lastStatus.distanceX||0;l=this.lastStatus.distanceY||0;n.distanceX=k.pageX-this.start_x;n.distanceY=k.pageY-this.start_y;n.moveX=n.distanceX-m;n.moveY=n.distanceY-l;n.distance=parseInt(Math.sqrt(Math.pow(n.distanceX,2)+Math.pow(n.distanceY,2)));n.duration=new Date().getTime()-this.start_time;n.direction=this.getDirection(k.pageX,k.pageY);return n};b.__reset=function(m,l){this.reset=false;this.lastStatus={};this.start_time=new Date().getTime();var k=this.__getPoint(m,l);this.start_x=k.pageX;this.start_y=k.pageY};b.__touchStart=function(o){var n=o.data.target;var m=o;if(!n.enabled){return}if(g(o.target).closest(n.noSwipeSelector,n.$element).length>0){return}o=o.originalEvent;if(i){g(this).css("-ms-touch-action",n.swipeType==="horizontal"?"pan-y":"pan-x")}if(!n.onSwipe){g.error("Swipe listener is undefined");return}if(n.touchStarted||e&&n.start_time&&o.type==="mousedown"&&new Date().getTime()-n.start_time<600){return}var k=n.__getPoint(o,m);n.start_x=k.pageX;n.start_y=k.pageY;n.start_time=new Date().getTime();g(document).bind(d,{target:n},n.__touchEnd).bind(a,{target:n},n.__touchMove).bind(j,{target:n},n.__touchCancel);var l=n.createStatusObject(k);l.phase="start";n.onSwipe.call(null,l);if(!e){m.preventDefault()}n.lastStatus=l;n.touchStarted=true};b.__touchMove=function(o){var n=o.data.target;var m=o;o=o.originalEvent;if(!n.touchStarted){return}clearTimeout(n.timo);n.timo=setTimeout(function(){n.__reset(o,m)},60);var k=n.__getPoint(o,m);var l=n.createStatusObject(k);if(n.priventDefultEvent(k.pageX,k.pageY)){m.preventDefault()}l.phase="move";n.lastStatus=l;n.onSwipe.call(null,l)};b.__touchEnd=function(n){var m=n.data.target;var l=n;n=n.originalEvent;clearTimeout(m.timo);var k=m.lastStatus;if(!e){l.preventDefault()}k.phase="end";m.touchStarted=false;m.priventEvt=null;g(document).unbind(d,m.__touchEnd).unbind(a,m.__touchMove).unbind(j,m.__touchCancel);k.speed=k.distance/k.duration;m.onSwipe.call(null,k)};b.__touchCancel=function(l){var k=l.data.target;k.__touchEnd(l)};b.__getPoint=function(l,k){if(e&&l.type.indexOf("mouse")===-1){return l.touches[0]}else{if(i){return l}else{return k}}};b.enable=function(){if(this.enabled){return}this.enabled=true};b.disable=function(){if(!this.enabled){return}this.enabled=false}})(jQuery);