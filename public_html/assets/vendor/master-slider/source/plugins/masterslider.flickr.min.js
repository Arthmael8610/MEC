(function(d){var c=function(g,i,h){return"https://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key="+g+"&photoset_id="+i+"&per_page="+h+"&format=json&jsoncallback=?"};var a=function(g,i,h){return"https://api.flickr.com/services/rest/?&method=flickr.people.getPublicPhotos&api_key="+g+"&user_id="+i+"&per_page="+h+"&format=json&jsoncallback=?"};var b=function(g,h){return"https://api.flickr.com/services/rest/?&method=flickr.photos.getInfo&api_key="+g+"&photo_id="+h+"&format=json&jsoncallback=?"};var f=function(j,i,k,g,h){return"https://farm"+j+".staticflickr.com/"+i+"/"+k+"_"+g+h+".jpg"};window.MSFlickr=function(j,h){var g={count:10,type:"photoset",desc:true,title:true,author:true,thumbs:true,descEff:"fade",titleEff:"fade",authorEff:"fade",autoplayDelay:4,thumbSize:"q",imgSize:"c"};this.count=0;this.slider=j;j.holdOn();if(!h.key){this.errMsg("Flickr API Key required. Please add it in gallery options.");return}d.extend(g,h);this.options=g;var i=this;if(this.options.type==="photoset"){d.getJSON(c(this.options.key,this.options.id,this.options.count),function(k){i._photosData(k)})}else{d.getJSON(a(this.options.key,this.options.id,this.options.count),function(k){i.options.type="photos";i._photosData(k)})}if(this.options.imgSize!==""){this.options.imgSize="_"+this.options.imgSize}this.options.thumbSize="_"+this.options.thumbSize};var e=MSFlickr.prototype;e._photosData=function(i){if(i.stat==="fail"){this.errMsg("Flickr API ERROR#"+i.code+": "+i.message);return}var h=this;var g=this.options.author||this.options.desc;d.each(i[this.options.type].photo,function(j,k){var l='<div class="ms-slide" id="slide-'+j+'" data-delay="'+h.options.autoplayDelay+'">';var m=k.title;l+='<img src="masterslider/blank.gif" data-src="'+f(k.farm,k.server,k.id,k.secret,h.options.imgSize)+'" alt="'+m+'" />';if(h.options.thumbs){l+='<img class="ms-thumb" src="'+f(k.farm,k.server,k.id,k.secret,h.options.thumbSize)+'" alt="'+m+'" />'}if(h.options.title){l+='<div class="ms-layer ms-fkr-title" data-effect="'+h.options.titleEff+'" data-duration = "1000"  data-ease = "easeOutQuad"  data-type = "text">'+m+"</div>"}l+="</div>";if(g){h.count++;d.getJSON(b(h.options.key,k.id),function(n){if(h.options.desc){d("#slide-"+j).append('<div class="ms-layer ms-fkr-desc" data-effect="'+h.options.descEff+'" data-duration = "1000"  data-ease = "easeOutQuad"  data-type = "text">'+n.photo.description._content+"</div>")}if(h.options.author){d("#slide-"+j).append('<div class="ms-layer ms-fkr-author" data-effect="'+h.options.authorEff+'" data-duration = "1000"  data-ease = "easeOutQuad"  data-type = "text">'+n.photo.owner.realname+"</div>")}h.count--;if(h.count===0){h._initSlider()}})}d(l).appendTo(h.slider.$element)});if(this.count===0){h._initSlider()}};e.errMsg=function(g){this.slider.$element.css("display","block");if(!this.errEle){this.errEle=d('<div style="font-family:Arial; color:red; font-size:12px; position:absolute; top:10px; left:10px"></div>').appendTo(this.slider.$loading)}this.errEle.html(g)};e._initSlider=function(){this.slider.release()}})(jQuery);