(function(c){var b=function(g,i,h){return"https://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key="+g+"&photoset_id="+i+"&per_page="+h+"&extras=url_o,description,date_taken,owner_name,views&format=json&jsoncallback=?"};var a=function(g,i,h){return"https://api.flickr.com/services/rest/?&method=flickr.people.getPublicPhotos&api_key="+g+"&user_id="+i+"&per_page="+h+"&extras=url_o,description,date_taken,owner_name,views&format=json&jsoncallback=?"};var e=function(k,j,l,g,h,i){if(h==="_o"&&i){return i.url_o}return"https://farm"+k+".staticflickr.com/"+j+"/"+l+"_"+g+h+".jpg"};window.MSFlickrV2=function(j,h){var g={count:10,type:"photoset",thumbSize:"q",imgSize:"c"};this.slider=j;this.slider.holdOn();if(!h.key){this.errMsg("Flickr API Key required. Please add it in settings.");return}c.extend(g,h);this.options=g;var i=this;if(this.options.type==="photoset"){c.getJSON(b(this.options.key,this.options.id,this.options.count),function(k){i._photosData(k)})}else{c.getJSON(a(this.options.key,this.options.id,this.options.count),function(k){i.options.type="photos";i._photosData(k)})}if(this.options.imgSize!==""&&this.options.imgSize!=="-"){this.options.imgSize="_"+this.options.imgSize}this.options.thumbSize="_"+this.options.thumbSize;this.slideTemplate=this.slider.$element.find(".ms-slide")[0].outerHTML;this.slider.$element.find(".ms-slide").remove()};var d=MSFlickrV2.prototype;d._photosData=function(i){if(i.stat==="fail"){this.errMsg("Flickr API ERROR#"+i.code+": "+i.message);return}var h=this;var g=this.options.author||this.options.desc;c.each(i[this.options.type].photo,function(j,k){var l=h.slideTemplate.replace(/{{[\w-]+}}/g,function(m){m=m.replace(/{{|}}/g,"");if(f[m]){return f[m](k,h)}else{return"{{"+m+"}}"}});c(l).appendTo(h.slider.$element)});h._initSlider()};d.errMsg=function(g){this.slider.$element.css("display","block");if(!this.errEle){this.errEle=c('<div style="font-family:Arial; color:red; font-size:12px; position:absolute; top:10px; left:10px"></div>').appendTo(this.slider.$loading)}this.errEle.html(g)};d._initSlider=function(){this.slider.release()};var f={image:function(h,g){return e(h.farm,h.server,h.id,h.secret,g.options.imgSize,h)},thumb:function(h,g){return e(h.farm,h.server,h.id,h.secret,g.options.thumbSize)},title:function(h,g){return h.title},"owner-name":function(h,g){return h.ownername},"date-taken":function(h,g){return h.datetaken},views:function(h,g){return h.views},description:function(h,g){return h.description._content}}})(jQuery);