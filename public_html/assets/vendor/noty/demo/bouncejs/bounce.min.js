!function(b){if("object"==typeof exports){module.exports=b()}else{if("function"==typeof define&&define.amd){define(b)}else{var a;"undefined"!=typeof window?a=window:"undefined"!=typeof global?a=global:"undefined"!=typeof self&&(a=self),a.Bounce=b()}}}(function(){var d,b,a;return(function c(f,k,h){function g(n,l){if(!k[n]){if(!f[n]){var i=typeof require=="function"&&require;if(!l&&i){return i(n,!0)}if(e){return e(n,!0)}throw new Error("Cannot find module '"+n+"'")}var m=k[n]={exports:{}};f[n][0].call(m.exports,function(o){var p=f[n][1][o];return g(p?p:o)},m,m.exports,c,f,k,h)}return k[n].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(i,h,f){var g,j,e;e=i("../math/matrix4d");j={bounce:i("../easing/bounce"),sway:i("../easing/sway"),hardbounce:i("../easing/hardbounce"),hardsway:i("../easing/hardsway")};g=(function(){k.prototype.easing="bounce";k.prototype.duration=1000;k.prototype.delay=0;k.prototype.from=null;k.prototype.to=null;function k(l){l||(l={});if(l.easing!=null){this.easing=l.easing}if(l.duration!=null){this.duration=l.duration}if(l.delay!=null){this.delay=l.delay}if(l.from!=null){this.from=l.from}if(l.to!=null){this.to=l.to}this.easingObject=new j[this.easing](l)}k.prototype.calculateEase=function(l){return this.easingObject.calculate(l)};k.prototype.getMatrix=function(){return new e().identity()};k.prototype.getEasedMatrix=function(l){return this.getMatrix()};k.prototype.serialize=function(){var l,o,n,m;o={type:this.constructor.name.toLowerCase(),easing:this.easing,duration:this.duration,delay:this.delay,from:this.from,to:this.to};m=this.easingObject.serialize();for(l in m){n=m[l];o[l]=n}return o};return k})();h.exports=g},{"../easing/bounce":6,"../easing/hardbounce":7,"../easing/hardsway":8,"../easing/sway":10,"../math/matrix4d":13}],2:[function(e,f,i){var l,g,k,m,j={}.hasOwnProperty,h=function(q,o){for(var n in o){if(j.call(o,n)){q[n]=o[n]}}function p(){this.constructor=q}p.prototype=o.prototype;q.prototype=new p();q.__super__=o.prototype;return q};g=e("../math/matrix4d");m=e("../math/vector2d");l=e("./index");k=(function(o){h(n,o);n.prototype.from=0;n.prototype.to=90;function n(){n.__super__.constructor.apply(this,arguments);this.diff=this.to-this.from}n.prototype.getMatrix=function(r){var t,q,p;q=(r/180)*Math.PI;t=Math.cos(q);p=Math.sin(q);return new g([t,-p,0,0,p,t,0,0,0,0,1,0,0,0,0,1])};n.prototype.getEasedMatrix=function(p){var r,q;q=this.calculateEase(p);r=this.from+this.diff*q;return this.getMatrix(r)};return n})(l);f.exports=k},{"../math/matrix4d":13,"../math/vector2d":14,"./index":1}],3:[function(f,g,j){var l,h,e,m,k={}.hasOwnProperty,i=function(q,o){for(var n in o){if(k.call(o,n)){q[n]=o[n]}}function p(){this.constructor=q}p.prototype=o.prototype;q.prototype=new p();q.__super__=o.prototype;return q};h=f("../math/matrix4d");m=f("../math/vector2d");l=f("./index");e=(function(o){i(n,o);n.prototype.from={x:0.5,y:0.5};n.prototype.to={x:1,y:1};function n(){n.__super__.constructor.apply(this,arguments);this.fromVector=new m(this.from.x,this.from.y);this.toVector=new m(this.to.x,this.to.y);this.diff=this.toVector.clone().subtract(this.fromVector)}n.prototype.getMatrix=function(p,r){var q;q=1;return new h([p,0,0,0,0,r,0,0,0,0,q,0,0,0,0,1])};n.prototype.getEasedMatrix=function(p){var q,r;q=this.calculateEase(p);r=this.fromVector.clone().add(this.diff.clone().multiply(q));return this.getMatrix(r.x,r.y)};return n})(l);g.exports=e},{"../math/matrix4d":13,"../math/vector2d":14,"./index":1}],4:[function(e,f,j){var l,g,h,m,k={}.hasOwnProperty,i=function(q,o){for(var n in o){if(k.call(o,n)){q[n]=o[n]}}function p(){this.constructor=q}p.prototype=o.prototype;q.prototype=new p();q.__super__=o.prototype;return q};g=e("../math/matrix4d");m=e("../math/vector2d");l=e("./index");h=(function(n){i(o,n);o.prototype.from={x:0,y:0};o.prototype.to={x:20,y:0};function o(){o.__super__.constructor.apply(this,arguments);this.fromVector=new m(this.from.x,this.from.y);this.toVector=new m(this.to.x,this.to.y);this.diff=this.toVector.clone().subtract(this.fromVector)}o.prototype.getMatrix=function(s,q){var u,t,r,p;u=(s/180)*Math.PI;t=(q/180)*Math.PI;r=Math.tan(u);p=Math.tan(t);return new g([1,r,0,0,p,1,0,0,0,0,1,0,0,0,0,1])};o.prototype.getEasedMatrix=function(p){var q,r;q=this.calculateEase(p);r=this.fromVector.clone().add(this.diff.clone().multiply(q));return this.getMatrix(r.x,r.y)};return o})(l);f.exports=h},{"../math/matrix4d":13,"../math/vector2d":14,"./index":1}],5:[function(e,f,i){var l,g,j,m,k={}.hasOwnProperty,h=function(q,o){for(var n in o){if(k.call(o,n)){q[n]=o[n]}}function p(){this.constructor=q}p.prototype=o.prototype;q.prototype=new p();q.__super__=o.prototype;return q};g=e("../math/matrix4d");m=e("../math/vector2d");l=e("./index");j=(function(n){h(o,n);o.prototype.from={x:0,y:0};o.prototype.to={x:0,y:0};function o(){o.__super__.constructor.apply(this,arguments);this.fromVector=new m(this.from.x,this.from.y);this.toVector=new m(this.to.x,this.to.y);this.diff=this.toVector.clone().subtract(this.fromVector)}o.prototype.getMatrix=function(p,r){var q;q=0;return new g([1,0,0,p,0,1,0,r,0,0,1,q,0,0,0,1])};o.prototype.getEasedMatrix=function(p){var q,r;q=this.calculateEase(p);r=this.fromVector.clone().add(this.diff.clone().multiply(q));return this.getMatrix(r.x,r.y)};return o})(l);f.exports=j},{"../math/matrix4d":13,"../math/vector2d":14,"./index":1}],6:[function(j,h,e){var g,k,f={}.hasOwnProperty,i=function(o,m){for(var l in m){if(f.call(m,l)){o[l]=m[l]}}function n(){this.constructor=o}n.prototype=m.prototype;o.prototype=new n();o.__super__=m.prototype;return o};k=j("./index");g=(function(m){i(l,m);l.prototype.bounces=4;l.prototype.stiffness=3;function l(o){var n;if(o==null){o={}}l.__super__.constructor.apply(this,arguments);if(o.stiffness!=null){this.stiffness=o.stiffness}if(o.bounces!=null){this.bounces=o.bounces}this.alpha=this.stiffness/100;n=0.005/Math.pow(10,this.stiffness);this.limit=Math.floor(Math.log(n)/-this.alpha);this.omega=this.calculateOmega(this.bounces,this.limit)}l.prototype.calculate=function(o){var n;if(o>=1){return 1}n=o*this.limit;return 1-this.exponent(n)*this.oscillation(n)};l.prototype.calculateOmega=function(n,o){return(this.bounces+0.5)*Math.PI/this.limit};l.prototype.exponent=function(n){return Math.pow(Math.E,-this.alpha*n)};l.prototype.oscillation=function(n){return Math.cos(this.omega*n)};l.prototype.serialize=function(){return{stiffness:this.stiffness,bounces:this.bounces}};return l})(k);h.exports=g},{"./index":9}],7:[function(k,i,e){var h,g,f={}.hasOwnProperty,j=function(o,m){for(var l in m){if(f.call(m,l)){o[l]=m[l]}}function n(){this.constructor=o}n.prototype=m.prototype;o.prototype=new n();o.__super__=m.prototype;return o};h=k("./bounce");g=(function(m){j(l,m);function l(){return l.__super__.constructor.apply(this,arguments)}l.prototype.oscillation=function(n){return Math.abs(Math.cos(this.omega*n))};return l})(h);i.exports=g},{"./bounce":6}],8:[function(k,i,f){var h,e,g={}.hasOwnProperty,j=function(o,m){for(var l in m){if(g.call(m,l)){o[l]=m[l]}}function n(){this.constructor=o}n.prototype=m.prototype;o.prototype=new n();o.__super__=m.prototype;return o};e=k("./sway");h=(function(m){j(l,m);function l(){return l.__super__.constructor.apply(this,arguments)}l.prototype.oscillation=function(n){return Math.abs(Math.sin(this.omega*n))};return l})(e);i.exports=h},{"./sway":10}],9:[function(h,g,f){var i,e;e=h("../math/helpers");i=(function(){function j(){}j.prototype.calculate=function(k){return k};j.prototype.serialize=function(){return{}};j.prototype.findOptimalKeyPoints=function(p,m){var l,k,o,n,s,q,t,r;if(p==null){p=1}if(m==null){m=1000}s=[0];r=(function(){var v,u;u=[];for(o=v=0;0<=m?v<m:v>m;o=0<=m?++v:--v){u.push(this.calculate(o/m))}return u}).call(this);s=s.concat(e.findTurningPoints(r));s.push(m-1);o=0;q=1000;while(q--){if(o===s.length-1){break}l=e.areaBetweenLineAndCurve(r,s[o],s[o+1]);if(l<=p){o++}else{k=Math.round(s[o]+(s[o+1]-s[o])/2);s.splice(o+1,0,k)}}if(q===0){return[]}return t=(function(){var w,v,u;u=[];for(w=0,v=s.length;w<v;w++){n=s[w];u.push(n/(m-1))}return u})()};return j})();g.exports=i},{"../math/helpers":12}],10:[function(k,i,f){var h,e,g={}.hasOwnProperty,j=function(o,m){for(var l in m){if(g.call(m,l)){o[l]=m[l]}}function n(){this.constructor=o}n.prototype=m.prototype;o.prototype=new n();o.__super__=m.prototype;return o};h=k("./bounce");e=(function(m){j(l,m);function l(){return l.__super__.constructor.apply(this,arguments)}l.prototype.calculate=function(o){var n;if(o>=1){return 0}n=o*this.limit;return this.exponent(n)*this.oscillation(n)};l.prototype.calculateOmega=function(n,o){return this.bounces*Math.PI/this.limit};l.prototype.oscillation=function(n){return Math.sin(this.omega*n)};return l})(h);i.exports=e},{"./bounce":6}],11:[function(j,i,f){var h,g,e;e=j("./math/matrix4d");g={scale:j("./components/scale"),rotate:j("./components/rotate"),translate:j("./components/translate"),skew:j("./components/skew")};h=(function(){k.FPS=30;k.counter=1;k.prototype.components=null;k.prototype.duration=0;function k(){this.components=[]}k.prototype.scale=function(l){return this.addComponent(new g.scale(l))};k.prototype.rotate=function(l){return this.addComponent(new g.rotate(l))};k.prototype.translate=function(l){return this.addComponent(new g.translate(l))};k.prototype.skew=function(l){return this.addComponent(new g.skew(l))};k.prototype.addComponent=function(l){this.components.push(l);this.updateDuration();return this};k.prototype.serialize=function(){var m,p,o,l,n;p=[];n=this.components;for(o=0,l=n.length;o<l;o++){m=n[o];p.push(m.serialize())}return p};k.prototype.deserialize=function(o){var m,n,l;for(n=0,l=o.length;n<l;n++){m=o[n];this.addComponent(new g[m.type](m))}return this};k.prototype.updateDuration=function(){return this.duration=this.components.map(function(l){return l.duration+l.delay}).reduce(function(m,l){return Math.max(m,l)})};k.prototype.define=function(l){this.name=l||k.generateName();this.styleElement=document.createElement("style");this.styleElement.innerHTML=this.getKeyframeCSS({name:this.name,prefix:true});document.body.appendChild(this.styleElement);return this};k.prototype.applyTo=function(l,w){var t,v,r,s,q,o,n,u,m,p;if(w==null){w={}}this.define();if(!l.length){l=[l]}q=this.getPrefixes();v=null;if(window.jQuery&&window.jQuery.Deferred){v=new window.jQuery.Deferred()}for(o=0,u=l.length;o<u;o++){r=l[o];p=q.animation;for(n=0,m=p.length;n<m;n++){s=p[n];t=[this.name,""+this.duration+"ms","linear","both"];if(w.loop){t.push("infinite")}r.style[""+s+"animation"]=t.join(" ")}}if(!w.loop){setTimeout(((function(x){return function(){if(w.remove){x.remove()}if(typeof w.onComplete==="function"){w.onComplete()}if(v){return v.resolve()}}})(this)),this.duration)}return v};k.prototype.remove=function(){var l;if(!this.styleElement){return}if(this.styleElement.remove){return this.styleElement.remove()}else{return(l=this.styleElement.parentNode)!=null?l.removeChild(this.styleElement):void 0}};k.prototype.getPrefixes=function(n){var m,l;m={transform:[""],animation:[""]};l=document.createElement("dummy").style;if(n||(!("transform" in l)&&"webkitTransform" in l)){m.transform=["-webkit-",""]}if(n||(!("animation" in l)&&"webkitAnimation" in l)){m.animation=["-webkit-",""]}return m};k.prototype.getKeyframeCSS=function(q){var r,D,y,u,w,x,z,v,s,n,m,l,A,C,B,t,p,o;if(q==null){q={}}this.name=q.name||k.generateName();z={transform:[""],animation:[""]};if(q.prefix||q.forcePrefix){z=this.getPrefixes(q.forcePrefix)}y=[];u=this.getKeyframes(q);t=this.keys;for(n=0,A=t.length;n<A;n++){D=t[n];w=u[D];v="matrix3d"+w;s=[];p=z.transform;for(m=0,C=p.length;m<C;m++){x=p[m];s.push(""+x+"transform: "+v+";")}y.push(""+(Math.round(D*100*100)/100)+"% { "+(s.join(" "))+" }")}r=[];o=z.animation;for(l=0,B=o.length;l<B;l++){x=o[l];r.push("@"+x+"keyframes "+this.name+" { \n  "+(y.join("\n  "))+" \n}")}return r.join("\n\n")};k.prototype.getKeyframes=function(r){var u,l,A,v,z,E,x,w,y,s,p,o,n,m,B,D,C,t,q;if(r==null){r={}}w=[0,1];if(r.optimized){t=this.components;for(p=0,B=t.length;p<B;p++){u=t[p];l=u.easingObject.findOptimalKeyPoints().map((function(F){return function(G){return(G*u.duration/F.duration)+(u.delay/F.duration)}})(this));if(u.delay){l.push((u.delay/this.duration)-0.001)}w=w.concat(l)}}else{v=Math.round((this.duration/1000)*k.FPS);for(z=o=0;0<=v?o<=v:o>=v;z=0<=v?++o:--o){w.push(z/v)}}w=w.sort(function(G,F){return G-F});this.keys=[];x={};for(n=0,D=w.length;n<D;n++){E=w[n];if(x[E]){continue}y=new e().identity();q=this.components;for(m=0,C=q.length;m<C;m++){u=q[m];A=E*this.duration;if((u.delay-A)>1e-8){continue}s=(E-u.delay/this.duration)/(u.duration/this.duration);y.multiply(u.getEasedMatrix(s))}this.keys.push(E);x[E]=y.transpose().toFixed(3)}return x};k.generateName=function(){return"animation-"+(k.counter++)};k.isSupported=function(){var t,o,l,r,m,q,p,s,n;m=document.createElement("dummy").style;r=[["transform","webkitTransform"],["animation","webkitAnimation"]];for(q=0,s=r.length;q<s;q++){l=r[q];o=false;for(p=0,n=l.length;p<n;p++){t=l[p];o||(o=t in m)}if(!o){return false}}return true};return k})();i.exports=h},{"./components/rotate":2,"./components/scale":3,"./components/skew":4,"./components/translate":5,"./math/matrix4d":13}],12:[function(h,g,f){var e;e=(function(){function i(){}i.prototype.sign=function(j){if(j<0){return -1}return 1};i.prototype.findTurningPoints=function(j){var k,o,l,p,n,m;p=[];for(k=n=1,m=j.length-1;1<=m?n<m:n>m;k=1<=m?++n:--n){o=this.sign(j[k]-j[k-1]);l=this.sign(j[k+1]-j[k]);if(o!==l){p.push(k)}}return p};i.prototype.areaBetweenLineAndCurve=function(s,j,n){var k,q,p,l,m,r,t,o;l=n-j;t=s[j];r=s[n];k=0;for(p=o=0;0<=l?o<=l:o>=l;p=0<=l?++o:--o){q=s[j+p];m=t+(p/l)*(r-t);k+=Math.abs(m-q)}return k};return i})();g.exports=new e},{}],13:[function(h,g,f){var e;e=(function(){i.prototype._array=null;function i(j){this._array=(j!=null?j.slice(0):void 0)||[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}i.prototype.equals=function(j){return this.toString()===j.toString()};i.prototype.identity=function(){this.setArray([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);return this};i.prototype.multiply=function(s){var q,p,n,r,t,o,m,l;r=new i;for(q=o=0;o<4;q=++o){for(p=m=0;m<4;p=++m){for(n=l=0;l<4;n=++l){t=r.get(q,p)+this.get(q,n)*s.get(n,p);r.set(q,p,t)}}}return this.copy(r)};i.prototype.transpose=function(){var j;j=this.getArray();this.setArray([j[0],j[4],j[8],j[12],j[1],j[5],j[9],j[13],j[2],j[6],j[10],j[14],j[3],j[7],j[11],j[15]]);return this};i.prototype.get=function(k,j){return this.getArray()[k*4+j]};i.prototype.set=function(l,j,k){return this._array[l*4+j]=k};i.prototype.copy=function(j){this._array=j.getArray();return this};i.prototype.clone=function(){return new i(this.getArray())};i.prototype.getArray=function(){return this._array.slice(0)};i.prototype.setArray=function(j){this._array=j;return this};i.prototype.toString=function(){return"("+(this.getArray().join(", "))+")"};i.prototype.toFixed=function(k){var j;this._array=(function(){var o,m,n,l;n=this._array;l=[];for(o=0,m=n.length;o<m;o++){j=n[o];l.push(parseFloat(j.toFixed(k)))}return l}).call(this);return this};return i})();g.exports=e},{}],14:[function(h,f,e){var g;g=(function(){i.prototype.x=0;i.prototype.y=0;function i(j,k){this.x=j!=null?j:0;this.y=k!=null?k:0}i.prototype.add=function(j){if(!i.isVector2D(j)){return this._addScalar(j)}this.x+=j.x;this.y+=j.y;return this};i.prototype._addScalar=function(j){this.x+=j;this.y+=j;return this};i.prototype.subtract=function(j){if(!i.isVector2D(j)){return this._subtractScalar(j)}this.x-=j.x;this.y-=j.y;return this};i.prototype._subtractScalar=function(j){return this._addScalar(-j)};i.prototype.multiply=function(j){if(!i.isVector2D(j)){return this._multiplyScalar(j)}this.x*=j.x;this.y*=j.y;return this};i.prototype._multiplyScalar=function(j){this.x*=j;this.y*=j;return this};i.prototype.divide=function(j){if(!i.isVector2D(j)){return this._divideScalar(j)}this.x/=j.x;this.y/=j.y;return this};i.prototype._divideScalar=function(j){return this._multiplyScalar(1/j)};i.prototype.clone=function(){return new i(this.x,this.y)};i.prototype.copy=function(j){this.x=j.x;this.y=j.y;return this};i.prototype.equals=function(j){return j.x===this.x&&j.y===this.y};i.prototype.toString=function(){return"("+this.x+", "+this.y+")"};i.prototype.toFixed=function(j){this.x=parseFloat(this.x.toFixed(j));this.y=parseFloat(this.y.toFixed(j));return this};i.prototype.toArray=function(){return[this.x,this.y]};i.isVector2D=function(j){return j instanceof i};return i})();f.exports=g},{}]},{},[11])(11)});