!function(d){if("object"==typeof exports){module.exports=d()}else{if("function"==typeof define&&define.amd){define(d)}else{var c;"undefined"!=typeof window?c=window:"undefined"!=typeof global?c=global:"undefined"!=typeof self&&(c=self),c.Bounce=d()}}}(function(){return function b(a,l,k){function j(f,e){if(!l[f]){if(!a[f]){var d="function"==typeof require&&require;if(!e&&d){return d(f,!0)}if(i){return i(f,!0)}throw new Error("Cannot find module '"+f+"'")}var c=l[f]={exports:{}};a[f][0].call(c.exports,function(g){var m=a[f][1][g];return j(m?m:g)},c,c.exports,b,a,l,k)}return l[f].exports}for(var i="function"==typeof require&&require,h=0;h<k.length;h++){j(k[h])}return j}({1:[function(g,f){var j,i,h;h=g("../math/matrix4d"),i={bounce:g("../easing/bounce"),sway:g("../easing/sway"),hardbounce:g("../easing/hardbounce"),hardsway:g("../easing/hardsway")},j=function(){function c(d){d||(d={}),null!=d.easing&&(this.easing=d.easing),null!=d.duration&&(this.duration=d.duration),null!=d.delay&&(this.delay=d.delay),null!=d.from&&(this.from=d.from),null!=d.to&&(this.to=d.to),this.easingObject=new i[this.easing](d)}return c.prototype.easing="bounce",c.prototype.duration=1000,c.prototype.delay=0,c.prototype.from=null,c.prototype.to=null,c.prototype.calculateEase=function(d){return this.easingObject.calculate(d)},c.prototype.getMatrix=function(){return(new h).identity()},c.prototype.getEasedMatrix=function(){return this.getMatrix()},c.prototype.serialize=function(){var k,e,m,l;e={type:this.constructor.name.toLowerCase(),easing:this.easing,duration:this.duration,delay:this.delay,from:this.from,to:this.to},l=this.easingObject.serialize();for(k in l){m=l[k],e[k]=m}return e},c}(),f.exports=j},{"../easing/bounce":6,"../easing/hardbounce":7,"../easing/hardsway":8,"../easing/sway":10,"../math/matrix4d":13}],2:[function(j,i){var p,o,n,m,l={}.hasOwnProperty,k=function(f,e){function h(){this.constructor=f}for(var g in e){l.call(e,g)&&(f[g]=e[g])}return h.prototype=e.prototype,f.prototype=new h,f.__super__=e.prototype,f};o=j("../math/matrix4d"),m=j("../math/vector2d"),p=j("./index"),n=function(d){function c(){c.__super__.constructor.apply(this,arguments),this.diff=this.to-this.from}return k(c,d),c.prototype.from=0,c.prototype.to=90,c.prototype.getMatrix=function(g){var f,q,h;return q=g/180*Math.PI,f=Math.cos(q),h=Math.sin(q),new o([f,-h,0,0,h,f,0,0,0,0,1,0,0,0,0,1])},c.prototype.getEasedMatrix=function(f){var e,g;return g=this.calculateEase(f),e=this.from+this.diff*g,this.getMatrix(e)},c}(p),i.exports=n},{"../math/matrix4d":13,"../math/vector2d":14,"./index":1}],3:[function(j,i){var p,o,n,m,l={}.hasOwnProperty,k=function(f,e){function h(){this.constructor=f}for(var g in e){l.call(e,g)&&(f[g]=e[g])}return h.prototype=e.prototype,f.prototype=new h,f.__super__=e.prototype,f};o=j("../math/matrix4d"),m=j("../math/vector2d"),p=j("./index"),n=function(d){function c(){c.__super__.constructor.apply(this,arguments),this.fromVector=new m(this.from.x,this.from.y),this.toVector=new m(this.to.x,this.to.y),this.diff=this.toVector.clone().subtract(this.fromVector)}return k(c,d),c.prototype.from={x:0.5,y:0.5},c.prototype.to={x:1,y:1},c.prototype.getMatrix=function(f,e){var g;return g=1,new o([f,0,0,0,0,e,0,0,0,0,g,0,0,0,0,1])},c.prototype.getEasedMatrix=function(f){var e,g;return e=this.calculateEase(f),g=this.fromVector.clone().add(this.diff.clone().multiply(e)),this.getMatrix(g.x,g.y)},c}(p),i.exports=n},{"../math/matrix4d":13,"../math/vector2d":14,"./index":1}],4:[function(j,i){var p,o,n,m,l={}.hasOwnProperty,k=function(f,e){function h(){this.constructor=f}for(var g in e){l.call(e,g)&&(f[g]=e[g])}return h.prototype=e.prototype,f.prototype=new h,f.__super__=e.prototype,f};o=j("../math/matrix4d"),m=j("../math/vector2d"),p=j("./index"),n=function(d){function c(){c.__super__.constructor.apply(this,arguments),this.fromVector=new m(this.from.x,this.from.y),this.toVector=new m(this.to.x,this.to.y),this.diff=this.toVector.clone().subtract(this.fromVector)}return k(c,d),c.prototype.from={x:0,y:0},c.prototype.to={x:20,y:0},c.prototype.getMatrix=function(q,h){var u,t,s,r;return u=q/180*Math.PI,t=h/180*Math.PI,s=Math.tan(u),r=Math.tan(t),new o([1,s,0,0,r,1,0,0,0,0,1,0,0,0,0,1])},c.prototype.getEasedMatrix=function(f){var e,g;return e=this.calculateEase(f),g=this.fromVector.clone().add(this.diff.clone().multiply(e)),this.getMatrix(g.x,g.y)},c}(p),i.exports=n},{"../math/matrix4d":13,"../math/vector2d":14,"./index":1}],5:[function(j,i){var p,o,n,m,l={}.hasOwnProperty,k=function(f,e){function h(){this.constructor=f}for(var g in e){l.call(e,g)&&(f[g]=e[g])}return h.prototype=e.prototype,f.prototype=new h,f.__super__=e.prototype,f};o=j("../math/matrix4d"),m=j("../math/vector2d"),p=j("./index"),n=function(d){function c(){c.__super__.constructor.apply(this,arguments),this.fromVector=new m(this.from.x,this.from.y),this.toVector=new m(this.to.x,this.to.y),this.diff=this.toVector.clone().subtract(this.fromVector)}return k(c,d),c.prototype.from={x:0,y:0},c.prototype.to={x:0,y:0},c.prototype.getMatrix=function(f,e){var g;return g=0,new o([1,0,0,f,0,1,0,e,0,0,1,g,0,0,0,1])},c.prototype.getEasedMatrix=function(f){var e,g;return e=this.calculateEase(f),g=this.fromVector.clone().add(this.diff.clone().multiply(e)),this.getMatrix(g.x,g.y)},c}(p),i.exports=n},{"../math/matrix4d":13,"../math/vector2d":14,"./index":1}],6:[function(h,g){var l,k,j={}.hasOwnProperty,i=function(f,e){function n(){this.constructor=f}for(var m in e){j.call(e,m)&&(f[m]=e[m])}return n.prototype=e.prototype,f.prototype=new n,f.__super__=e.prototype,f};k=h("./index"),l=function(d){function c(e){var f;null==e&&(e={}),c.__super__.constructor.apply(this,arguments),null!=e.stiffness&&(this.stiffness=e.stiffness),null!=e.bounces&&(this.bounces=e.bounces),this.alpha=this.stiffness/100,f=0.005/Math.pow(10,this.stiffness),this.limit=Math.floor(Math.log(f)/-this.alpha),this.omega=this.calculateOmega(this.bounces,this.limit)}return i(c,d),c.prototype.bounces=4,c.prototype.stiffness=3,c.prototype.calculate=function(f){var e;return f>=1?1:(e=f*this.limit,1-this.exponent(e)*this.oscillation(e))},c.prototype.calculateOmega=function(){return(this.bounces+0.5)*Math.PI/this.limit},c.prototype.exponent=function(e){return Math.pow(Math.E,-this.alpha*e)},c.prototype.oscillation=function(e){return Math.cos(this.omega*e)},c.prototype.serialize=function(){return{stiffness:this.stiffness,bounces:this.bounces}},c}(k),g.exports=l},{"./index":9}],7:[function(h,g){var l,k,j={}.hasOwnProperty,i=function(f,e){function n(){this.constructor=f}for(var m in e){j.call(e,m)&&(f[m]=e[m])}return n.prototype=e.prototype,f.prototype=new n,f.__super__=e.prototype,f};l=h("./bounce"),k=function(d){function c(){return c.__super__.constructor.apply(this,arguments)}return i(c,d),c.prototype.oscillation=function(e){return Math.abs(Math.cos(this.omega*e))},c}(l),g.exports=k},{"./bounce":6}],8:[function(h,g){var l,k,j={}.hasOwnProperty,i=function(f,e){function n(){this.constructor=f}for(var m in e){j.call(e,m)&&(f[m]=e[m])}return n.prototype=e.prototype,f.prototype=new n,f.__super__=e.prototype,f};k=h("./sway"),l=function(d){function c(){return c.__super__.constructor.apply(this,arguments)}return i(c,d),c.prototype.oscillation=function(e){return Math.abs(Math.sin(this.omega*e))},c}(k),g.exports=l},{"./sway":10}],9:[function(f,e){var h,g;g=f("../math/helpers"),h=function(){function c(){}return c.prototype.calculate=function(d){return d},c.prototype.serialize=function(){return{}},c.prototype.findOptimalKeyPoints=function(t,s){var r,q,p,o,n,m,l,d;for(null==t&&(t=1),null==s&&(s=1000),n=[0],d=function(){var i,j;for(j=[],p=i=0;s>=0?s>i:i>s;p=s>=0?++i:--i){j.push(this.calculate(p/s))}return j}.call(this),n=n.concat(g.findTurningPoints(d)),n.push(s-1),p=0,m=1000;m--&&p!==n.length-1;){r=g.areaBetweenLineAndCurve(d,n[p],n[p+1]),t>=r?p++:(q=Math.round(n[p]+(n[p+1]-n[p])/2),n.splice(p+1,0,q))}return 0===m?[]:l=function(){var i,k,j;for(j=[],i=0,k=n.length;k>i;i++){o=n[i],j.push(o/(s-1))}return j}()},c}(),e.exports=h},{"../math/helpers":12}],10:[function(h,g){var l,k,j={}.hasOwnProperty,i=function(f,e){function n(){this.constructor=f}for(var m in e){j.call(e,m)&&(f[m]=e[m])}return n.prototype=e.prototype,f.prototype=new n,f.__super__=e.prototype,f};l=h("./bounce"),k=function(d){function c(){return c.__super__.constructor.apply(this,arguments)}return i(c,d),c.prototype.calculate=function(f){var e;return f>=1?0:(e=f*this.limit,this.exponent(e)*this.oscillation(e))},c.prototype.calculateOmega=function(){return this.bounces*Math.PI/this.limit},c.prototype.oscillation=function(e){return Math.sin(this.omega*e)},c}(l),g.exports=k},{"./bounce":6}],11:[function(g,f){var j,i,h;h=g("./math/matrix4d"),i={scale:g("./components/scale"),rotate:g("./components/rotate"),translate:g("./components/translate"),skew:g("./components/skew")},j=function(){function c(){this.components=[]}return c.FPS=30,c.counter=1,c.prototype.components=null,c.prototype.duration=0,c.prototype.scale=function(d){return this.addComponent(new i.scale(d))},c.prototype.rotate=function(d){return this.addComponent(new i.rotate(d))},c.prototype.translate=function(d){return this.addComponent(new i.translate(d))},c.prototype.skew=function(d){return this.addComponent(new i.skew(d))},c.prototype.addComponent=function(d){return this.components.push(d),this.updateDuration(),this},c.prototype.serialize=function(){var l,k,o,n,m;for(k=[],m=this.components,o=0,n=m.length;n>o;o++){l=m[o],k.push(l.serialize())}return k},c.prototype.deserialize=function(k){var d,m,l;for(m=0,l=k.length;l>m;m++){d=k[m],this.addComponent(new i[d.type](d))}return this},c.prototype.updateDuration=function(){return this.duration=this.components.map(function(d){return d.duration+d.delay}).reduce(function(e,d){return Math.max(e,d)})},c.prototype.define=function(a){return this.name=a||c.generateName(),this.styleElement=document.createElement("style"),this.styleElement.innerHTML=this.getKeyframeCSS({name:this.name,prefix:!0}),document.body.appendChild(this.styleElement),this},c.prototype.applyTo=function(x,w){var v,u,t,s,r,q,p,o,n,m;for(null==w&&(w={}),this.define(),x.length||(x=[x]),r=this.getPrefixes(),u=null,window.jQuery&&window.jQuery.Deferred&&(u=new window.jQuery.Deferred),q=0,o=x.length;o>q;q++){for(t=x[q],m=r.animation,p=0,n=m.length;n>p;p++){s=m[p],v=[this.name,""+this.duration+"ms","linear","both"],w.loop&&v.push("infinite"),t.style[""+s+"animation"]=v.join(" ")}}return w.loop||setTimeout(function(d){return function(){return w.remove&&d.remove(),"function"==typeof w.onComplete&&w.onComplete(),u?u.resolve():void 0}}(this),this.duration),u},c.prototype.remove=function(){var d;if(this.styleElement){return this.styleElement.remove?this.styleElement.remove():null!=(d=this.styleElement.parentNode)?d.removeChild(this.styleElement):void 0}},c.prototype.getPrefixes=function(e){var d,k;return d={transform:[""],animation:[""]},k=document.createElement("dummy").style,(e||!("transform" in k)&&"webkitTransform" in k)&&(d.transform=["-webkit-",""]),(e||!("animation" in k)&&"webkitAnimation" in k)&&(d.animation=["-webkit-",""]),d},c.prototype.getKeyframeCSS=function(L){var K,J,I,H,G,F,E,D,C,B,A,z,y,x,w,v,u,a;for(null==L&&(L={}),this.name=L.name||c.generateName(),E={transform:[""],animation:[""]},(L.prefix||L.forcePrefix)&&(E=this.getPrefixes(L.forcePrefix)),I=[],H=this.getKeyframes(L),v=this.keys,B=0,y=v.length;y>B;B++){for(J=v[B],G=H[J],D="matrix3d"+G,C=[],u=E.transform,A=0,x=u.length;x>A;A++){F=u[A],C.push(""+F+"transform: "+D+";")}I.push(""+Math.round(100*J*100)/100+"% { "+C.join(" ")+" }")}for(K=[],a=E.animation,z=0,w=a.length;w>z;z++){F=a[z],K.push("@"+F+"keyframes "+this.name+" { \n  "+I.join("\n  ")+" \n}")}return K.join("\n\n")},c.prototype.getKeyframes=function(N){var M,L,K,J,I,H,G,F,E,D,C,B,A,z,y,x,w,e,a;if(null==N&&(N={}),F=[0,1],N.optimized){for(e=this.components,C=0,y=e.length;y>C;C++){M=e[C],L=M.easingObject.findOptimalKeyPoints().map(function(d){return function(k){return k*M.duration/d.duration+M.delay/d.duration}}(this)),M.delay&&L.push(M.delay/this.duration-0.001),F=F.concat(L)}}else{for(J=Math.round(this.duration/1000*c.FPS),I=B=0;J>=0?J>=B:B>=J;I=J>=0?++B:--B){F.push(I/J)}}for(F=F.sort(function(k,d){return k-d}),this.keys=[],G={},A=0,x=F.length;x>A;A++){if(H=F[A],!G[H]){for(E=(new h).identity(),a=this.components,z=0,w=a.length;w>z;z++){M=a[z],K=H*this.duration,M.delay-K>1e-8||(D=(H-M.delay/this.duration)/(M.duration/this.duration),E.multiply(M.getEasedMatrix(D)))}this.keys.push(H),G[H]=E.transpose().toFixed(3)}}return G},c.generateName=function(){return"animation-"+c.counter++},c.isSupported=function(){var s,r,q,p,o,n,m,l,k;for(o=document.createElement("dummy").style,p=[["transform","webkitTransform"],["animation","webkitAnimation"]],n=0,l=p.length;l>n;n++){for(q=p[n],r=!1,m=0,k=q.length;k>m;m++){s=q[m],r||(r=s in o)}if(!r){return !1}}return !0},c}(),f.exports=j},{"./components/rotate":2,"./components/scale":3,"./components/skew":4,"./components/translate":5,"./math/matrix4d":13}],12:[function(e,d){var f;f=function(){function c(){}return c.prototype.sign=function(g){return 0>g?-1:1},c.prototype.findTurningPoints=function(i){var h,n,m,l,k,j;for(l=[],h=k=1,j=i.length-1;j>=1?j>k:k>j;h=j>=1?++k:--k){n=this.sign(i[h]-i[h-1]),m=this.sign(i[h+1]-i[h]),n!==m&&l.push(h)}return l},c.prototype.areaBetweenLineAndCurve=function(v,u,t){var s,r,q,p,o,n,m,l;for(p=t-u,m=v[u],n=v[t],s=0,q=l=0;p>=0?p>=l:l>=p;q=p>=0?++l:--l){r=v[u+q],o=m+q/p*(n-m),s+=Math.abs(o-r)}return s},c}(),d.exports=new f},{}],13:[function(e,d){var f;f=function(){function c(g){this._array=(null!=g?g.slice(0):void 0)||[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}return c.prototype._array=null,c.prototype.equals=function(g){return this.toString()===g.toString()},c.prototype.identity=function(){return this.setArray([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},c.prototype.multiply=function(r){var q,p,o,n,m,l,k,a;for(n=new c,q=l=0;4>l;q=++l){for(p=k=0;4>k;p=++k){for(o=a=0;4>a;o=++a){m=n.get(q,p)+this.get(q,o)*r.get(o,p),n.set(q,p,m)}}}return this.copy(n)},c.prototype.transpose=function(){var g;return g=this.getArray(),this.setArray([g[0],g[4],g[8],g[12],g[1],g[5],g[9],g[13],g[2],g[6],g[10],g[14],g[3],g[7],g[11],g[15]]),this},c.prototype.get=function(h,g){return this.getArray()[4*h+g]},c.prototype.set=function(h,g,i){return this._array[4*h+g]=i},c.prototype.copy=function(g){return this._array=g.getArray(),this},c.prototype.clone=function(){return new c(this.getArray())},c.prototype.getArray=function(){return this._array.slice(0)},c.prototype.setArray=function(g){return this._array=g,this},c.prototype.toString=function(){return"("+this.getArray().join(", ")+")"},c.prototype.toFixed=function(h){var g;return this._array=function(){var k,j,i,a;for(i=this._array,a=[],k=0,j=i.length;j>k;k++){g=i[k],a.push(parseFloat(g.toFixed(h)))}return a}.call(this),this},c}(),d.exports=f},{}],14:[function(e,d){var f;f=function(){function c(h,g){this.x=null!=h?h:0,this.y=null!=g?g:0}return c.prototype.x=0,c.prototype.y=0,c.prototype.add=function(a){return c.isVector2D(a)?(this.x+=a.x,this.y+=a.y,this):this._addScalar(a)},c.prototype._addScalar=function(g){return this.x+=g,this.y+=g,this},c.prototype.subtract=function(a){return c.isVector2D(a)?(this.x-=a.x,this.y-=a.y,this):this._subtractScalar(a)},c.prototype._subtractScalar=function(g){return this._addScalar(-g)},c.prototype.multiply=function(a){return c.isVector2D(a)?(this.x*=a.x,this.y*=a.y,this):this._multiplyScalar(a)},c.prototype._multiplyScalar=function(g){return this.x*=g,this.y*=g,this},c.prototype.divide=function(a){return c.isVector2D(a)?(this.x/=a.x,this.y/=a.y,this):this._divideScalar(a)},c.prototype._divideScalar=function(g){return this._multiplyScalar(1/g)},c.prototype.clone=function(){return new c(this.x,this.y)},c.prototype.copy=function(g){return this.x=g.x,this.y=g.y,this},c.prototype.equals=function(g){return g.x===this.x&&g.y===this.y},c.prototype.toString=function(){return"("+this.x+", "+this.y+")"},c.prototype.toFixed=function(g){return this.x=parseFloat(this.x.toFixed(g)),this.y=parseFloat(this.y.toFixed(g)),this},c.prototype.toArray=function(){return[this.x,this.y]},c.isVector2D=function(a){return a instanceof c},c}(),d.exports=f},{}]},{},[11])(11)});