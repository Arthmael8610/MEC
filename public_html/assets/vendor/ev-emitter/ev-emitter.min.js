(function(b,a){if(typeof define=="function"&&define.amd){define(a)}else{if(typeof module=="object"&&module.exports){module.exports=a()}else{b.EvEmitter=a()}}}(typeof window!="undefined"?window:this,function(){function a(){}var b=a.prototype;b.on=function(c,f){if(!c||!f){return}var d=this._events=this._events||{};var e=d[c]=d[c]||[];if(e.indexOf(f)==-1){e.push(f)}return this};b.once=function(d,e){if(!d||!e){return}this.on(d,e);var c=this._onceEvents=this._onceEvents||{};var f=c[d]=c[d]||{};f[e]=true;return this};b.off=function(c,f){var e=this._events&&this._events[c];if(!e||!e.length){return}var d=e.indexOf(f);if(d!=-1){e.splice(d,1)}return this};b.emitEvent=function(c,d){var f=this._events&&this._events[c];if(!f||!f.length){return}f=f.slice(0);d=d||[];var j=this._onceEvents&&this._onceEvents[c];for(var e=0;e<f.length;e++){var h=f[e];var g=j&&j[h];if(g){this.off(c,h);delete j[h]}h.apply(this,d)}return this};b.allOff=function(){delete this._events;delete this._onceEvents};return a}));