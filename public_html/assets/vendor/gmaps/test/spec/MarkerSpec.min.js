describe("Creating a marker",function(){var b,a;beforeEach(function(){b=b||new GMaps({el:"#map-with-markers",lat:-12.0533,lng:-77.0293,zoom:14})});describe("With basic options",function(){beforeEach(function(){a=b.addMarker({lat:-12.0533,lng:-77.0293,title:"New marker"})});it("should add the marker to the markers collection",function(){expect(b.markers.length).toEqual(1);expect(b.markers[0]).toEqual(a)});it("should create a marker with defined position",function(){expect(parseFloat(a.getPosition().lat().toFixed(4))).toEqual(-12.0533);expect(parseFloat(a.getPosition().lng().toFixed(4))).toEqual(-77.0293)})});describe("With events",function(){var c;beforeEach(function(){c={onclick:function(){console.log(this.title)}};spyOn(c,"onclick").and.callThrough();a=b.addMarker({lat:-12.0533,lng:-77.0193,title:"New marker",click:c.onclick})});it("should respond to click event",function(){google.maps.event.trigger(a,"click");expect(c.onclick).toHaveBeenCalled()})})});describe("Removing markers",function(){var a;beforeEach(function(){a=a||new GMaps({el:"#map-with-markers",lat:-12.0533,lng:-77.0293,zoom:14});a.removeMarkers();a.addMarkers([{lat:-12.0523,lng:-77.0297,title:"Marker #1"},{lat:-12.0531,lng:-77.0289,title:"Marker #2"},{lat:-12.0537,lng:-77.0299,title:"Marker #3"},{lat:-12.0532,lng:-77.0278,title:"Marker #4"}])});it("should remove a marker from the markers collection",function(){a.removeMarker(a.markers[0]);expect(a.markers.length).toEqual(3)});it("should remove an array of markers from the markers collection",function(){var b=[a.markers[0],a.markers[2]];a.removeMarkers(b);expect(a.markers.length).toEqual(2)})});